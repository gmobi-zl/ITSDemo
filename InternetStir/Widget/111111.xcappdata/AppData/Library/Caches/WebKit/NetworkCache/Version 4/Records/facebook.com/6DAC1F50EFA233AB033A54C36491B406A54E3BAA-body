if (self.CavalryLogger) { CavalryLogger.start_js(["IhgjG"]); }

__d("VideoDownloadDeleteReason",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CACHE_SYNC:"cache_sync",CONSISTENCY_CHECK:"consistency_check",USER_INITIATED:"user_initiated",CHUNKED_PLAYBACK_NOT_SUPPORTED:"chunked_playback_not_supported"};}),null);
__d("VideoDownloadLoggerEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CONTROL_IMPRESSION:"control_impression",DOWNLOAD_CANCELLED:"download_cancelled",DOWNLOAD_DELETED:"download_deleted",DOWNLOAD_FAILED:"download_failed",DOWNLOAD_FINISHED:"download_finished",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_REQUESTED:"download_requested",SLOW_PLAYBACK_DETECTED:"slow_playback_detected",SURVEY_URI_REQUESTED:"survey_uri_requested",SURVEY_IMPRESSION_ATTEMPT:"survey_impression_attempt",SURVEY_PROMPT_RESULT:"survey_prompt_result",QUALITY_SELECTED:"quality_selected",QUALITY_SELECTOR_IMPRESSION:"quality_selector_impression",REQUESTED_PLAYING:"requested_playing",PAGE_SETTING_CHANGE:"page_setting_change"};}),null);
__d("VideoDownloadLoggerFields",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={APP_ID:"app_id",AVAILABLE_QUALITIES:"available_qualities",AVAILABLE_QUALITIES_COUNT:"available_qualities_count",BYTES_DOWNLOADED:"bytes_downloaded",CONFIG_NAME:"config_name",CONNECTIVITY_TYPE:"connectivity_type",DELETE_REASON:"delete_reason",DEVICE_YEAR_CLASS:"device_year_class",DOWNLOAD_ORIGIN:"download_origin",DOWNLOAD_SETTING:"download_setting",ELAPSED_TIME_MS:"elapsed_time_ms",ERROR:"error",ERROR_CODE:"error_code",EVENT_NAME:"event_name",EVENT_ORIGIN:"event_origin",EVENT_SUBORIGIN:"event_suborigin",IS_EMPLOYEE:"is_employee",IS_VISIBLE:"is_visible",OWNER_ID:"owner_id",QUALITY:"quality",REASON:"reason",SAVED_OFFLINE:"saved_offline",SESSION_ID:"session_id",TOTAL_SIZE:"total_size",TIME_MS:"time_ms",VIDEO_ID:"video_id"};}),null);
__d("VideoDownloadReason",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AUTO_INITIATED:"auto_initiated",USER_INITIATED:"user_initiated"};}),null);
__d("VideoPlayerInitializationEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PLAYER_INITIALIZATION:"player_initialization",PLAYER_ALLOCATED:"player_allocated",REQUESTED_PLAYING:"requested_playing",STARTED_PLAYING:"started_playing",PLAYER_SENT_REQUEST:"player_sent",PLAYER_RECEIVED_FIRST_BYTE:"player_received_first_byte",BUFFER_READY:"buffer_ready",METADATA_READY:"metadata_ready"};}),null);
__d("VideoPlayerLoggerEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AUTOPLAY_PREFERENCE_CHANGED:"autoplay_preference_changed",END_STALL_TIME:"end_stall_time",AUTOPLAY_PREFERENCE_STATUS:"autoplay_preference_status",ERROR_ALERT_SHOWN:"video_error_alert_shown",NOT_AUTOPLAYING:"not_autoplaying",VIDEO_CHANNEL_NO_RELATED_VIDEO:"video_channel_no_related_video",VIDEO_ORIENTATION_CHANGED:"video_orientation_changed",COMMERCIAL_BREAK_OFFSCREEN:"commercial_break_offscreen",COMMERCIAL_BREAK_ONSCREEN:"commercial_break_onscreen",ASSETS_LOADED:"assets_loaded",BUFFERED:"buffered",CANCELLED_REQUESTED_PLAYING:"cancelled_requested_playing",CAROUSEL_CHANGE:"carousel_change",CLICK:"click",CHROMECAST_AVAILABILITY_CHECKED:"chromecast_availabilty_checked",CHROMECAST_CAST_CLICKED:"chromecast_button_clicked",CHROMECAST_CAST_CONNECTED:"chromecast_connected",CHROMECAST_CAST_DISABLED:"chromecast_button_disabled",CHROMECAST_CAST_DISCONNECTED:"chromecast_disconnected",CHROMECAST_CAST_RECONNECTED:"chromecast_reconnected",CHROMECAST_CAST_VISIBLE:"chromecast_button_visible",CHROMECAST_NOT_SUPPORTED:"chromecast_not_supported",DISPLAYED:"displayed",ENTERED_HD:"entered_hd",ENTERED_FALLBACK:"entered_fallback",ENTERED_FS:"entered_fs",EXITED_HD:"exited_hd",EXITED_FS:"exited_fs",ERROR:"error",FINISHED_LOADING:"finished_loading",FINISHED_PLAYING:"finished_playing",HEADSET_CONNECTED:"headset_connected",HEADSET_DISCONNECTED:"headset_disconnected",HOST_ERROR:"host_error",HTTP_STATUS_UPDATE:"http_status_update",IMPRESSION:"impression",INVALID_URL:"invalid_url",MUTED:"muted",NO_SURFACE_UPDATE:"no_surface_update",PAUSED:"paused",PLAY_REQUESTED:"play_requested",PLAYER_FORMAT_CHANGED:"player_format_changed",PLAYER_LOADED:"player_loaded",PROGRESS:"progress",STREAM_RESET:"stream_reset",POP_FAILOVER:"pop_failover",SURFACE_UPDATED:"surface_updated",TOGGLE_SUBTITLE_OFF:"toggle_subtitle_off",TOGGLE_SUBTITLE_ON:"toggle_subtitle_on",QUALITY_CHANGE:"quality_change",READY_TO_PLAY:"ready_to_play",REPLAYED:"replayed",REPRESENTATION_ENDED:"representation_ended",REQUESTED:"requested",REQUESTED_PLAYING:"requested_playing",SCRUBBED:"scrubbed",STARTED_PLAYING:"started_playing",STARTED_RECEIVING_BYTES:"started_receiving_bytes",STOPPED_PLAYING:"stopped_playing",UNMUTED:"unmuted",UNPAUSED:"unpaused",VOLUME_CHANGED:"volume_changed",VOLUME_DECREASE:"volume_decrease",VOLUME_INCREASE:"volume_increase",VIDEO_PLAYING:"video_playing",VIDEO_SKIP_AD:"video_skip_ad",VIDEO_CHAINING_IMPRESSION:"video_chaining_impression",VIDEO_CHAINING_TAP:"video_chaining_tap",PLAYING_LIVE_STARTED:"playing_live_started",PLAYING_LIVE_STOPPED:"playing_live_stopped",SWITCHED_IMPLEMENTATION:"switched_implementation",INLINE_CLICK_TO_PLAY:"inline_click_to_play",VIDEO_PLAYER_SERVICE_DISCONNECTED:"video_player_service_disconnected",VIDEO_PLAYER_SERVICE_RECONNECTED:"video_player_service_reconnected",VIDEO_PLAYER_SERVICE_UNAVAILABLE:"video_player_service_unavailable",LIVE_SEGMENT_LOAD_ERROR:"live_segment_load_error",MANIFEST_LOAD_ERROR:"manifest_load_error",MANIFEST_DATA_TYPE_ERROR:"manifest_data_type_error",STREAM_SEGMENT_LOAD_ERROR:"stream_segment_load_error",PLAYHEAD_FELL_BEHIND_ERROR:"playhead_fell_behind_error",UNEXPECTED_SEGMENT_ERROR:"unexpected_segment_error",PLAYER_WARNING:"player_warning",NETWORK_TIMEOUT:"network_timeout",COMPLETION:"completion",VIEW:"view",PLAYED_FOR_THREE_SECONDS:"played_for_three_seconds",VIEWPORT_ROTATED:"viewport_rotated",VIEWPORT_ZOOMED:"viewport_zoomed",HEADING_RESET:"heading_reset",GUIDE_ENTERED:"guide_entered",GUIDE_EXITED:"guide_exited",SPHERICAL_FALLBACK_ENTERED:"spherical_fallback_entered",BANZAI_OAUTH_PARSE_ERROR:"banzai_oauth_parse_error",BANZAI_OAUTH_SESSION_ERROR:"banzai_oauth_session_error"};}),null);
__d("VideoPlayerLoggerSource",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ADS:"ads",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",EMBEDDED:"embedded",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",HTML5:"html5",INLINE:"inline",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",INSIGHTS:"insights",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LOOKBACK:"lookback",MEDIA_COLLAGE:"media_collage",MESSAGING:"messaging",MISC:"misc",MOBILE:"mobile",OFFERS_DETAIL:"offers_detail",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PERMALINK:"permalink",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",REPORT_FLOW:"report_flow",REVIEW:"review",SNOWLIFT:"snowlift",SRT_REVIEW:"srt_review",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_HOME_INLINE:"video_home_inline",TV:"tv",VIDEOHUB_PLAYLIST:"videohub_playlist",VIDEOHUB_FEATURED:"videohub_featured",SLIDESHOW:"slideshow",LIVE_MAP:"live_map",LIVE_MAP_INLINE:"live_map_inline",ISSUES_MODULE:"issues_module",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module"};}),null);
__d("VideoPlayerReason",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AUTOPLAY:"autoplay_initiated",USER:"user_initiated",PAGE_VISIBILITY:"page_visibility_initiated",SEEK:"seek_initiated",LOOP:"loop_initiated",EMBEDDED_VIDEO_API:"embedded_video_api_initiated",CONNECTION:"host-connection-error",VIDEO_DATA_REPLACED:"video_data_replaced",VOD_NOT_READY:"vod_not_ready",VIDEO_DATA_SWITCH:"video_data_switch",FALLBACK_MODE:"fallback_mode",COMMERCIAL_BREAK:"commercial_break",SPHERICAL_FALLBACK:"spherical_fallback",UNLOADED:"unloaded"};}),null);
__d("VideoPlayerVersions",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={HTML5:"html5",SILVERCITY:"silvercity",PLEASANTVILLE:"pleasantville",OLD_API_PSR:"old_api_psr",OLD_API_EXO:"old_api_exo",OLD_API_EXO_NEW_LIB:"old_api_exo_new_lib",OLD_API_EXO_DEPRECATED:"old_api_exo_deprecated",LEGACY:"legacy",REFACTORED:"refactored",FNF:"fnf",MBASIC:"mbasic",CHROMECAST:"chromecast",CASTING_DEBUG:"casting_debug",UNKNOWN:"unknown"};}),null);
__d('MCustomDialog',['cx','DOM','ge'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';var m=i.create('div',{className:"_3uug"},null),n=i.create('div',{className:"_3uuh"},i.create('h2',null,l.titleString)),o=i.create('div',{className:"_3uui"},i.create('p',null,l.descriptionString)),p=i.create('p',{className:"_3uuj"},l.dismissButtonString),q=i.create('div',{className:"_3uuk"},p);i.appendContent(m,n);i.appendContent(m,o);i.appendContent(m,q);if(l.confirmButtonString&&l.confirmButtonCallback){var r=i.create('p',{className:"_3uuj"},l.confirmButtonString);i.prependContent(q,r);}var s=i.create('div',{className:"_3uul"},m);p.addEventListener('click',function(){i.remove(s);l.dismissButtonCallback&&l.dismissButtonCallback();});r&&r.addEventListener('click',function(){i.remove(s);l.confirmButtonCallback&&l.confirmButtonCallback();});var t=j('root');if(t)i.prependContent(t,s);}f.exports=k;}),null);
__d('MFullScreen',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={debounce:function i(j,k,l){var m;return function(){var n=this,o=arguments,p=function r(){m=null;if(!l)j.apply(n,o);},q=l&&!m;clearTimeout(m);m=setTimeout(p,k);if(q)j.apply(n,o);};},isSupported:function i(){var j=document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.fullscreenEnabled,k=document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.cancelFullScreen||document.exitFullScreen;return j&&k;},isFullScreen:function i(){return document.webkitIsFullScreen||document.fullScreen||document.mozFullScreen||document.msFullscreenElement;},enableFullScreen:function i(j){if(j.webkitRequestFullScreen){j.webkitRequestFullScreen();}else if(j.mozRequestFullScreen){j.mozRequestFullScreen();}else if(j.msRequestFullscreen){j.msRequestFullscreen();}else if(j.requestFullScreen)j.requestFullScreen();},disableFullScreen:function i(){if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.msExitFullscreen){document.msExitFullscreen();}else if(document.cancelFullScreen){document.cancelFullScreen();}else if(document.exitFullScreen)document.exitFullScreen();},listenForFullScreenEvent:function i(j,k){var l=this.debounce(k,500);j.addEventListener('webkitfullscreenchange',k);j.addEventListener('mozfullscreenchange',k);j.addEventListener('MSFullscreenChange',k);j.addEventListener('fullscreenchange',l);},removeFullScreenEventListeners:function i(j,k){var l=this.debounce(k,500);j.removeEventListener('webkitfullscreenchange',k);j.removeEventListener('mozfullscreenchange',k);j.removeEventListener('MSFullscreenChange',k);j.removeEventListener('fullscreenchange',l);}};f.exports=h;}),null);
__d('mergeHelpers',['invariant','keyMirror','FbtResult'],(function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=36,l=function n(o){return typeof o!=='object'||o instanceof Date||o===null||o instanceof j;},m={MAX_MERGE_DEPTH:k,isTerminal:l,normalizeMergeArg:function n(o){return o===undefined||o===null?{}:o;},checkMergeArrayArgs:function n(o,p){!(Array.isArray(o)&&Array.isArray(p))?h(0):void 0;},checkMergeObjectArgs:function n(o,p){m.checkMergeObjectArg(o);m.checkMergeObjectArg(p);},checkMergeObjectArg:function n(o){!(!l(o)&&!Array.isArray(o))?h(0):void 0;},checkMergeIntoObjectArg:function n(o){!((!l(o)||typeof o==='function')&&!Array.isArray(o))?h(0):void 0;},checkMergeLevel:function n(o){!(o<k)?h(0):void 0;},checkArrayStrategy:function n(o){!(o===undefined||o in m.ArrayStrategies)?h(0):void 0;},ArrayStrategies:i({Clobber:true,IndexByIndex:true})};f.exports=m;}),null);
__d('mergeDeepInto',['invariant','mergeHelpers'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i.ArrayStrategies,k=i.checkArrayStrategy,l=i.checkMergeArrayArgs,m=i.checkMergeLevel,n=i.checkMergeObjectArgs,o=i.isTerminal,p=i.normalizeMergeArg,q=function u(v,w,x,y){n(v,w);m(y);var z=w?Object.keys(w):[];for(var aa=0;aa<z.length;aa++){var ba=z[aa];s(v,w,ba,x,y);}},r=function u(v,w,x,y){l(v,w);m(y);var z=Math.max(v.length,w.length);for(var aa=0;aa<z;aa++)s(v,w,aa,x,y);},s=function u(v,w,x,y,z){var aa=w[x],ba=w.hasOwnProperty(x),ca=ba&&o(aa),da=ba&&Array.isArray(aa),ea=ba&&!da&&!da,fa=v[x],ga=v.hasOwnProperty(x),ha=ga&&o(fa),ia=ga&&Array.isArray(fa),ja=ga&&!ia&&!ia;if(ha){if(ca){v[x]=aa;}else if(da){v[x]=[];r(v[x],aa,y,z+1);}else if(ea){v[x]={};q(v[x],aa,y,z+1);}else if(!ba)v[x]=fa;}else if(ia){if(ca){v[x]=aa;}else if(da){!j[y]?h(0):void 0;if(y===j.Clobber)fa.length=0;r(fa,aa,y,z+1);}else if(ea){v[x]={};q(v[x],aa,y,z+1);}else !ba;}else if(ja){if(ca){v[x]=aa;}else if(da){v[x]=[];r(v[x],aa,y,z+1);}else if(ea){q(fa,aa,y,z+1);}else !ba;}else if(!ga)if(ca){v[x]=aa;}else if(da){v[x]=[];r(v[x],aa,y,z+1);}else if(ea){v[x]={};q(v[x],aa,y,z+1);}else !ba;},t=function u(v,w,x){var y=p(w);k(x);q(v,y,x,0);};f.exports=t;}),null);
__d('AsyncStorage',['Deferred','mergeDeepInto','mergeHelpers'],(function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=j.ArrayStrategies,l=window.indexedDB,m=1,n='data',o=false,p=void 0,q=Date.now(),r=new h();function s(){var v=l.open('AsyncStorage',m);v.onerror=function(event){var w=new Error('Failed to open AsyncStorage IndexedDB instance.');r.reject(w);};v.onsuccess=function(event){o&&false;p=event.target.result;r.resolve({db:p});p.onerror=function(w){};};v.onupgradeneeded=function(w){var x=w.currentTarget.result;if(x.objectStoreNames&&x.objectStoreNames.contains(n))return;x.createObjectStore(n,{keyPath:'key'});};}if(l)s();function t(v){if(p){v();}else r.then(function(){o&&false;t(v);});}var u={setItem:function v(w,x,y){this.multiSet([[w,x]],function(z){y(z&&z[0]||null);});},getItem:function v(w,x){this.multiGet([w],function(y,z){var aa=z!==undefined&&z[0]!==undefined&&typeof z[0][1]!==undefined?z[0][1]:null;x(y&&y[0]||null,aa);});},removeItem:function v(w,x){this.multiRemove([w],function(y){x(y&&y[0]||null);});},multiGet:function v(w,x){var y=[];this._multiOp(w,'readonly',function(z){return x(z,y);},function(z){return z;},function(z,aa,ba){if(aa&&z===aa.key){o&&false;y.push([z,aa.value.value]);}else y.push([z,null]);});},multiSet:function v(w,x){this._multiOp(w,'readwrite',x,function(y){return y[0];},function(y,z,aa){if(z&&y[0]===z.key){var ba=z.value;ba.value=y[1];o&&false;z.update(ba);}else aa.push(y);});},multiMerge:function v(w,x){this._multiOp(w,'readwrite',x,function(y){return y[0];},function(y,z,aa){if(z&&y[0]===z.key){var ba=z.value,ca=JSON.parse(ba.value);i(ca,JSON.parse(y[1]),k.Clobber);o&&false;ba.value=JSON.stringify(ca);z.update(ba);}else{o&&false;aa.push(y);}});},multiRemove:function v(w,x){this._multiOp(w,'readwrite',x,function(y){return y;},function(y,z,aa){if(z&&y===z.key){o&&false;z['delete']();}});},getAllKeys:function v(w){t(function(){var x=p.transaction([n],'readonly'),y=x.objectStore(n).openCursor(),z=[];y.onsuccess=function(event){var aa=event.target.result;if(!aa){w(null,z);return;}z.push(aa.key);aa['continue']();};});},clear:function v(w){t(function(){var x=p.transaction([n],'readwrite'),y=x.objectStore(n).openCursor();y.onsuccess=function(event){var z=event.target.result;if(!z){w(null);return;}z['delete']();z['continue']();};});},_multiOp:function v(w,x,y,z,aa){t(function(){var ba=false,ca=w.slice().sort(function(ia,ja){var ka=z(ia),la=z(ja);if(ka===la){var ma=new Error('AsyncStorage._multiOp cannot process duplicate keys.');y&&y(ma);ba=true;return 0;}return ka<la?-1:1;});if(ba)return;var da=p.transaction([n],x),ea=da.objectStore(n).openCursor(),fa=[],ga=0;ea.onsuccess=function(event){var ia=event.target.result;if(!ia){while(ga<ca.length){aa(ca[ga],ia,fa);ga++;}ha();return;}var ja=ia.key;o&&false;while(z(ca[ga])<=ja){o&&false;aa(ca[ga],ia,fa);ga++;if(ga===ca.length){ha();return;}}var ka=z(ca[ga]);ia['continue'](ka);};function ha(){var ia=da.objectStore(n);fa.forEach(function(ja){o&&false;ia.add({key:ja[0],value:ja[1]});});}da.oncomplete=function(){y&&y(null);};da.onerror=function(event){var ia=new Error('IndexedDB error: '+event.target.error.message);y&&y(ia);};o&&false;});}};f.exports=u;}),null);
__d("str2rstr",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j="",k,l;for(var m=0;m<i.length;m++){k=i.charCodeAt(m);l=m+1<i.length?i.charCodeAt(m+1):0;if(55296<=k&&k<=56319&&56320<=l&&l<=57343){k=65536+((k&1023)<<10)+(l&1023);m++;}if(k<=127){j+=String.fromCharCode(k);}else if(k<=2047){j+=String.fromCharCode(192|k>>>6&31,128|k&63);}else if(k<=65535){j+=String.fromCharCode(224|k>>>12&15,128|k>>>6&63,128|k&63);}else if(k<=2097151)j+=String.fromCharCode(240|k>>>18&7,128|k>>>12&63,128|k>>>6&63,128|k&63);}return j;}f.exports=h;}),null);
__d('md5',['str2rstr'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(v,w){var x=v[0],y=v[1],z=v[2],aa=v[3];x=k(x,y,z,aa,w[0],7,-680876936);aa=k(aa,x,y,z,w[1],12,-389564586);z=k(z,aa,x,y,w[2],17,606105819);y=k(y,z,aa,x,w[3],22,-1044525330);x=k(x,y,z,aa,w[4],7,-176418897);aa=k(aa,x,y,z,w[5],12,1200080426);z=k(z,aa,x,y,w[6],17,-1473231341);y=k(y,z,aa,x,w[7],22,-45705983);x=k(x,y,z,aa,w[8],7,1770035416);aa=k(aa,x,y,z,w[9],12,-1958414417);z=k(z,aa,x,y,w[10],17,-42063);y=k(y,z,aa,x,w[11],22,-1990404162);x=k(x,y,z,aa,w[12],7,1804603682);aa=k(aa,x,y,z,w[13],12,-40341101);z=k(z,aa,x,y,w[14],17,-1502002290);y=k(y,z,aa,x,w[15],22,1236535329);x=l(x,y,z,aa,w[1],5,-165796510);aa=l(aa,x,y,z,w[6],9,-1069501632);z=l(z,aa,x,y,w[11],14,643717713);y=l(y,z,aa,x,w[0],20,-373897302);x=l(x,y,z,aa,w[5],5,-701558691);aa=l(aa,x,y,z,w[10],9,38016083);z=l(z,aa,x,y,w[15],14,-660478335);y=l(y,z,aa,x,w[4],20,-405537848);x=l(x,y,z,aa,w[9],5,568446438);aa=l(aa,x,y,z,w[14],9,-1019803690);z=l(z,aa,x,y,w[3],14,-187363961);y=l(y,z,aa,x,w[8],20,1163531501);x=l(x,y,z,aa,w[13],5,-1444681467);aa=l(aa,x,y,z,w[2],9,-51403784);z=l(z,aa,x,y,w[7],14,1735328473);y=l(y,z,aa,x,w[12],20,-1926607734);x=m(x,y,z,aa,w[5],4,-378558);aa=m(aa,x,y,z,w[8],11,-2022574463);z=m(z,aa,x,y,w[11],16,1839030562);y=m(y,z,aa,x,w[14],23,-35309556);x=m(x,y,z,aa,w[1],4,-1530992060);aa=m(aa,x,y,z,w[4],11,1272893353);z=m(z,aa,x,y,w[7],16,-155497632);y=m(y,z,aa,x,w[10],23,-1094730640);x=m(x,y,z,aa,w[13],4,681279174);aa=m(aa,x,y,z,w[0],11,-358537222);z=m(z,aa,x,y,w[3],16,-722521979);y=m(y,z,aa,x,w[6],23,76029189);x=m(x,y,z,aa,w[9],4,-640364487);aa=m(aa,x,y,z,w[12],11,-421815835);z=m(z,aa,x,y,w[15],16,530742520);y=m(y,z,aa,x,w[2],23,-995338651);x=n(x,y,z,aa,w[0],6,-198630844);aa=n(aa,x,y,z,w[7],10,1126891415);z=n(z,aa,x,y,w[14],15,-1416354905);y=n(y,z,aa,x,w[5],21,-57434055);x=n(x,y,z,aa,w[12],6,1700485571);aa=n(aa,x,y,z,w[3],10,-1894986606);z=n(z,aa,x,y,w[10],15,-1051523);y=n(y,z,aa,x,w[1],21,-2054922799);x=n(x,y,z,aa,w[8],6,1873313359);aa=n(aa,x,y,z,w[15],10,-30611744);z=n(z,aa,x,y,w[6],15,-1560198380);y=n(y,z,aa,x,w[13],21,1309151649);x=n(x,y,z,aa,w[4],6,-145523070);aa=n(aa,x,y,z,w[11],10,-1120210379);z=n(z,aa,x,y,w[2],15,718787259);y=n(y,z,aa,x,w[9],21,-343485551);v[0]=t(x,v[0]);v[1]=t(y,v[1]);v[2]=t(z,v[2]);v[3]=t(aa,v[3]);}function j(v,w,x,y,z,aa){w=t(t(w,v),t(y,aa));return t(w<<z|w>>>32-z,x);}function k(v,w,x,y,z,aa,ba){return j(w&x|~w&y,v,w,z,aa,ba);}function l(v,w,x,y,z,aa,ba){return j(w&y|x&~y,v,w,z,aa,ba);}function m(v,w,x,y,z,aa,ba){return j(w^x^y,v,w,z,aa,ba);}function n(v,w,x,y,z,aa,ba){return j(x^(w|~y),v,w,z,aa,ba);}function o(v){var w=v.length,x=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=v.length;y+=64)i(x,p(v.substring(y-64,y)));v=v.substring(y-64);var z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<v.length;y++)z[y>>2]|=v.charCodeAt(y)<<((y&3)<<3);z[y>>2]|=128<<((y&3)<<3);if(y>55){i(x,z);for(y=0;y<16;y++)z[y]=0;}z[14]=w*8;i(x,z);return x;}function p(v){var w=[],x=0;while(x<64)w[x>>2]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;return w;}var q='0123456789abcdef'.split('');function r(v){var w='',x=0;for(;x<4;x++)w+=q[v>>(x<<3)+4&15]+q[v>>(x<<3)&15];return w;}function s(v){for(var w=0;w<v.length;w++)v[w]=r(v[w]);return v.join('');}var t=function v(w,x){return w+x&4294967295;};function u(v){if(null===v||undefined===v){return null;}else{for(var w=0;w<v.length;w++)if(v[w]>"\u007F"){v=h(v);break;}return s(o(v));}}if(u('hello')!='5d41402abc4b2a76b9719d911017c592')t=function v(w,x){var y=(w&65535)+(x&65535),z=(w>>16)+(x>>16)+(y>>16);return z<<16|y&65535;};f.exports=u;}),null);
__d('MVideoCacheConfig',['CurrentUser','MVideoDownloadConfig','md5','WebStorage'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=null,l={CACHE_PREFIX:'vc',PREFIX_SEPARATOR:'_',CONFIG_PREFIX:'config',KEYS:{lastCleanUp:'lastCleanUp'},isSupported:function m(){try{if(!k)k=c('WebStorage');return k.getLocalStorage();}catch(n){k=null;return false;}},currentAccountHash:function m(){var n=''+h.getAccountID();return j(n);},getUserPrefix:function m(){return l.CACHE_PREFIX+l.PREFIX_SEPARATOR+l.currentAccountHash()+l.PREFIX_SEPARATOR;},getCacheConfigKey:function m(){return l.CACHE_PREFIX+l.PREFIX_SEPARATOR+l.CONFIG_PREFIX+l.PREFIX_SEPARATOR+l.currentAccountHash();},initCacheConfig:function m(){var n={},o=Date.now()-2*i.cache_sync_interval_ms;n[l.KEYS.lastCleanUp]=o;n=JSON.stringify(n);var p=l.getCacheConfigKey();k.getLocalStorage().setItem(p,n);return n;},getCacheConfig:function m(){var n=l.getCacheConfigKey(),o=k.getLocalStorage().getItem(n);try{JSON.parse(o);}catch(p){o=null;}if(o===null)o=l.initCacheConfig();o=JSON.parse(o);return o;},getItemFromConfig:function m(n){var o=l.getCacheConfig();return o[n];},setItemFromConfig:function m(n,o){var p=l.getCacheConfig();p[n]=o;p=JSON.stringify(p);var q=l.getCacheConfigKey();k.getLocalStorage().setItem(q,p);}};f.exports=l;}),null);
__d('XHRRequestRetrier',['setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.$XHRRequestRetrier1=j;this.$XHRRequestRetrier2=false;this.$XHRRequestRetrier3=0;this.$XHRRequestRetrier4=0;this.$XHRRequestRetrier5=0;this.$XHRRequestRetrier6=1000;this.$XHRRequestRetrier7=2;this.$XHRRequestRetrier8=.5;this.$XHRRequestRetrier9=j.getErrorHandler();j.setErrorHandler(this.$XHRRequestRetrier11.bind(this));this.$XHRRequestRetrier10=j.getAbortHandler();j.setAbortHandler(this.$XHRRequestRetrier12.bind(this));}i.prototype.setMaxAttempts=function(j){'use strict';this.$XHRRequestRetrier5=j;return this;};i.prototype.setBaseRetryDelayMs=function(j){'use strict';this.$XHRRequestRetrier6=j;return this;};i.prototype.setRetryBackoffFactor=function(j){'use strict';this.$XHRRequestRetrier7=j;return this;};i.prototype.setRetryFuzzFactor=function(j){'use strict';this.$XHRRequestRetrier8=j;return this;};i.prototype.send=function(){'use strict';if(this.$XHRRequestRetrier2)return;if(this.$XHRRequestRetrier1.getTimeout())throw new Error('Not supported.');this.$XHRRequestRetrier3++;if(!this.$XHRRequestRetrier4)this.$XHRRequestRetrier4=this.$XHRRequestRetrier6;this.$XHRRequestRetrier1.send();};i.prototype.$XHRRequestRetrier11=function(){'use strict';if(this.$XHRRequestRetrier3<this.$XHRRequestRetrier5){this.$XHRRequestRetrier13();}else if(this.$XHRRequestRetrier9)this.$XHRRequestRetrier9.apply(this,arguments);};i.prototype.$XHRRequestRetrier12=function(){'use strict';this.$XHRRequestRetrier2=true;if(this.$XHRRequestRetrier10)this.$XHRRequestRetrier10.apply(this,arguments);};i.prototype.$XHRRequestRetrier13=function(){'use strict';var j=this.send.bind(this),k=Math.random()*2-1,l=k*this.$XHRRequestRetrier8,m=this.$XHRRequestRetrier4*(1+l);h(j,m);this.$XHRRequestRetrier4*=this.$XHRRequestRetrier7;};f.exports=i;}),null);
__d('URIDownloader',['invariant','URI','XHRRequest','XHRRequestRetrier'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=200000,m=15,n=2000,o=1.5;function p(q,r){'use strict';this.$URIDownloader1=new i(q);this.$URIDownloader2=r;this.$URIDownloader3=0;this.$URIDownloader4=0;this.$URIDownloader5=[];}p.prototype.setResponseHandler=function(q){'use strict';!!this.$URIDownloader10?h(0):void 0;this.$URIDownloader9=q;return this;};p.prototype.setChunkedResponseHandler=function(q){'use strict';!!this.$URIDownloader9?h(0):void 0;this.$URIDownloader10=q;return this;};p.prototype.setErrorHandler=function(q){'use strict';this.$URIDownloader11=q;return this;};p.prototype.setAbortHandler=function(q){'use strict';this.$URIDownloader12=q;return this;};p.prototype.setProgressHandler=function(q){'use strict';this.$URIDownloader13=q;return this;};p.prototype.$URIDownloader14=function(q){'use strict';if(this.$URIDownloader8)return;if(this.$URIDownloader13)this.$URIDownloader13({total:this.$URIDownloader2,loaded:this.$URIDownloader4+(q?q:0)});};p.prototype.$URIDownloader15=function(){'use strict';if(this.$URIDownloader8)return;if(this.$URIDownloader9){var q=null;if(this.$URIDownloader5)q=new Blob(this.$URIDownloader5);this.$URIDownloader9(q);}if(this.$URIDownloader10)this.$URIDownloader10(this.$URIDownloader5);};p.prototype.$URIDownloader16=function(q){'use strict';if(this.$URIDownloader8)return;if(this.$URIDownloader17(q)){if(this.$URIDownloader4<this.$URIDownloader2){this.$URIDownloader14();this.$URIDownloader18();}else this.$URIDownloader15();}else this.$URIDownloader19();};p.prototype.$URIDownloader19=function(){'use strict';if(this.$URIDownloader8)return;if(this.$URIDownloader11)this.$URIDownloader11();};p.prototype.$URIDownloader20=function(){'use strict';if(this.$URIDownloader8)return;if(this.$URIDownloader12)this.$URIDownloader12();};p.prototype.$URIDownloader21=function(){'use strict';var q=Math.min(this.$URIDownloader4+l,this.$URIDownloader2);this.$URIDownloader3=q-this.$URIDownloader4;};p.prototype.$URIDownloader17=function(q){'use strict';if(this.$URIDownloader8)return false;if(this.$URIDownloader3!==q.size)return false;this.$URIDownloader5.push(q);this.$URIDownloader4+=this.$URIDownloader3;this.$URIDownloader3=0;return true;};p.prototype.$URIDownloader18=function(){'use strict';if(this.$URIDownloader8)return;var q=new j(this.$URIDownloader1).setMethod('GET').setResponseType('blob').setResponseHandler(this.$URIDownloader16.bind(this)).setErrorHandler(this.$URIDownloader19.bind(this)).setAbortHandler(this.$URIDownloader20.bind(this)).setDownloadProgressHandler(function(t){if(t.loadedBytes)this.$URIDownloader14(t.loadedBytes);}.bind(this));this.$URIDownloader21();q.setRequestHeader('Range','bytes='+this.$URIDownloader4+'-'+(this.$URIDownloader4+this.$URIDownloader3-1));this.$URIDownloader7=q;var r=new k(q).setMaxAttempts(m).setBaseRetryDelayMs(n).setRetryBackoffFactor(o);this.$URIDownloader6=r;try{r.send();}catch(s){this.$URIDownloader19();}};p.prototype.sendRequest=function(){'use strict';this.$URIDownloader4=0;this.$URIDownloader18();};p.prototype.abort=function(){'use strict';this.$URIDownloader8=true;if(this.$URIDownloader7&&this.$URIDownloader7.abort){this.$URIDownloader7.abort();}else if(this.$URIDownloader12)this.$URIDownloader12();this.$URIDownloader22();};p.prototype.$URIDownloader22=function(){'use strict';this.$URIDownloader7=null;this.$URIDownloader5=null;this.$URIDownloader12=null;this.$URIDownloader11=null;this.$URIDownloader9=null;this.$URIDownloader13=null;};f.exports=p;}),null);
__d('SubRipText',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={size:'90%'};function i(t){var u=Number(t.substr(0,t.length-1)),v=t.substr(-1);switch(v){case 's':return u;case 'm':return u*60;case 'h':return u*3600;}var w=t.split(':');u=Number(w[w.length-1].replace(/,/,'.'));if(w.length>1)u+=Number(w[w.length-2])*60;if(w.length>2)u+=Number(w[w.length-3])*3600;return u;}function j(t){var u=t.split(/\r\n|\r|\n/).map(function(z){return z.trim();}),v=[],w=0;do{var x=u.indexOf('',w);if(x<0)x=u.length;var y=l(u.slice(w,x));if(y)v.push(y);w=x+1;}while(w>0&&w<u.length);return v;}function k(t){var u=t.split('-->');if(u.length!=2)return null;var v=i(u[0].trim()),w=i(u[1].trim());if(Number.isNaN(w)||Number.isNaN(v))return null;return {begin:v,end:w};}function l(t){if(t.length<3)return null;var u=m(t[0]),v=k(t[1]);if(!v)return null;return {counter:u,begin:v.begin,end:v.end,text:t.slice(2,6)};}function m(t){return Number(t.trim());}function n(t){var u=t.split('.');if(u[0].length<2)return '0'+u.join('.');return u.join('.');}function o(t){var u=n(Math.floor(t/3600).toString()),v=n(Math.floor(t%3600/60).toString()),w=n((t%60).toFixed(3));return u+':'+v+':'+w;}function p(t,u,v){var w='';if(v)for(var x in v)w+=' '+x+':'+v[x];return o(t)+' --> '+o(u)+w;}function q(t,u){return t.counter+'\n'+p(t.begin,t.end,u)+'\n'+t.text.join('\n')+'\n';}function r(t,u){return 'WEBVTT\n\n'+t.map(function(v){return q(v,u);}).join('\n');}function s(t){'use strict';this.$SubRipText1=j(t);this.$SubRipText1.sort(function(u,v){return u.counter-v.counter;});this.$SubRipText2=this.$SubRipText1.map(function(u,v){return v;}).sort(function(u,v){return (this.$SubRipText1[u].begin-this.$SubRipText1[v].begin);}.bind(this));this.invalidateCache();this.$SubRipText6=h;}s.prototype.$SubRipText7=function(t){'use strict';return this.$SubRipText1[this.$SubRipText2[t]];};s.prototype.$SubRipText8=function(t){'use strict';var u=this.$SubRipText3;while(u<this.$SubRipText2.length){var v=this.$SubRipText7(u);if(v.begin<=t){this.$SubRipText4.push(v);u++;}else break;}this.$SubRipText3=u;};s.prototype.$SubRipText9=function(t){'use strict';this.$SubRipText4=this.$SubRipText4.filter(function(u){return u.end>t;});};s.prototype.invalidateCache=function(){'use strict';this.$SubRipText5=0;this.$SubRipText4=[];this.$SubRipText3=0;};s.prototype.setStyle=function(t){'use strict';this.$SubRipText6=t;};s.prototype.getSubtitles=function(t){'use strict';if(t<this.$SubRipText5)this.invalidateCache();this.$SubRipText5=t;this.$SubRipText8(t);this.$SubRipText9(t);return this.$SubRipText4.reduce(function(u,v){return u.concat(v.text);},[]);};s.prototype.renderVTT=function(){'use strict';return r(this.$SubRipText1,this.$SubRipText6);};f.exports=s;}),null);
__d('MVideoSubtitles',['DOM','EventListener','SubRipText','XHRRequest','emptyFunction','getCrossOriginTransport'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=b.URL||b.webkitURL;function o(p){'use strict';this.$MVideoSubtitles1=p;this.$MVideoSubtitles2=l;}o.prototype.$MVideoSubtitles3=function(p){'use strict';var q=new j(p),r=new Blob([q.renderVTT()],{type:'text/vtt'});return n.createObjectURL(r);};o.prototype.loadSubtitles=function(p){'use strict';if(!n)return;new k(p).setTransportBuilder(m).setMethod('GET').setResponseHandler(function(q){this.$MVideoSubtitles4(this.$MVideoSubtitles3(q));}.bind(this)).send();};o.prototype.$MVideoSubtitles4=function(p){'use strict';var q=h.create('track',{kind:'captions',src:p});i.listen(q,'load',function(){this.$MVideoSubtitles2();}.bind(this));h.appendContent(this.$MVideoSubtitles1,q);this.hideSubtitles();};o.prototype.showSubtitles=function(){'use strict';Array.prototype.forEach.call(this.$MVideoSubtitles1.textTracks,function(p){return p.mode='showing';});};o.prototype.hideSubtitles=function(){'use strict';Array.prototype.forEach.call(this.$MVideoSubtitles1.textTracks,function(p){return p.mode='hidden';});};o.prototype.setOnSubtitlesReady=function(p){'use strict';this.$MVideoSubtitles2=p;};f.exports=o;}),null);
__d('Network',['mixInEventEmitter'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=true,j=b.navigator.connection,k={0:'unknown',1:'ethernet',2:'wifi',3:'2g',4:'3g'};function l(){return i;}function m(r){if(r==i)return;i=r;q.emit(r?'online':'offline');}function n(){return j?j.bandwidth:i?Infinity:0;}function o(){return j?j.metered:false;}function p(){var r=j?String(j.type):'0';return k[r]||r;}var q={getBandwidth:n,getType:p,isMetered:o,isOnline:l,setOnline:m};h(q,{online:true,offline:true});if(b.addEventListener){b.addEventListener('online',m.bind(null,true));b.addEventListener('offline',m.bind(null,false));}else if(b.attachEvent){b.attachEvent('online',m.bind(null,true));b.attachEvent('offline',m.bind(null,false));}f.exports=q;}),null);
__d('MVideoUtils',['Bootloader','CSS','DataAttributeUtils','DOM','MVideoSubtitles','SubscriptionsHandler','URI','Network','cx','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=null,s=null,t=null,u={PLAY_SIGIL:'playInlineVideo',INSERTION_POINT_SIGIL:'inlineVideo',LOADING_CLASS:"_2nmc",SHOWN_CLASS:"_53mu",SHOWN_CLASS_WITH_DOWNLOAD:"_2qoq",PLAYER_CLASS:"_53mv",SHOW_PAUSE_CLASS:"_3gzh",SPHERICAL_CLASS:"_4a1j",PLAYER_ID:{video:'mInlineVideoPlayer',iframe:'mInlineVideoFrame'},PLAYER_ATTRS:{video:function v(w){return {autobuffer:'true',controls:w?undefined:'controls','x-webkit-airplay':'allow'};},iframe:function v(){return {frameBorder:0};}},PLAYER_STATE:{playing:'playing',paused:'paused'},createNodeFromTag:function v(w,x){var y=k.create(w,this.PLAYER_ATTRS[w](!!x));y.id=this.PLAYER_ID[w];i.conditionClass(y,this.PLAYER_CLASS,true);return y;},onPlay:function v(w){i.conditionClass(w,this.SHOW_PAUSE_CLASS,false);},onPause:function v(w){i.conditionClass(w,this.SHOW_PAUSE_CLASS,true);},play:function v(w){q(function(){if(w)w.play();},100);},setVideoDimensions:function v(w,x){if(w.width)x.setAttribute('width',w.width);if(w.height)x.setAttribute('height',w.height);},setSubtitles:function v(w,x){var y;if(new n(w.subtitlesSrc).isCdnURI())(function(){var z=new l(x);z.setOnSubtitlesReady(function(){return z.showSubtitles();});z.loadSubtitles(w.subtitlesSrc);})();},setupListenersOnPlay:function v(w,x,y){if(!w)w=new m();w.addSubscriptions(k.listen(x,'pause',null,function(){return this.onPause(y);}.bind(this)),k.listen(x,'play',null,function(){return this.onPlay(y);}.bind(this)));},getStoryNode:function v(w){return w&&w.getNode('story-div');},_handleLoggingOnPlayWithBootload:function v(w,x,y,z){if(r.isLoggedIn()){z=this.getStoryNode(w)||z;if(z){var aa=j.getDataFt(z);if(aa){var ba={ft:JSON.parse(aa)};if(x){var ca=x.getLogger();ca.setFTData(ba);}if(y.fbid&&y.ownerID){aa=s.parse(aa,f.id);aa.video_info={video_id:y.fbid,owner_id:y.ownerID};aa=s.stringify(aa);}new t('/feedtracking/').setMethod('POST').setData({ft_data:aa,clicked_uri:y.src,tn:y.trackingNodes}).send();}}}},handleLoggingOnPlay:function v(w,x,y,z){h.loadModules(["CurrentUser","FBJSON","MRequest"],function(aa,ba,ca){r=aa;s=ba;t=ca;u._handleLoggingOnPlayWithBootload(w,x,y,z);},'MVideoUtils');},getHumanReadbleSize:function v(w){var x=1000,y=x*x,z=x*x*x;if(w>z){return this.formatNumber(w,z,2)+' GB';}else return this.formatNumber(w,y,1)+' MB';},formatNumber:function v(w,x,y){return Math.ceil(w/(x/Math.pow(10,y)))/Math.pow(10,y);},getDownloadProgressText:function v(w,x){return u.getHumanReadbleSize(w)+' / '+u.getHumanReadbleSize(x);},getDownloadProgressPercentage:function v(w,x){var y=w/x*100;y=y.toFixed(1);return y.toString();},getConnectivityType:function v(){var w=o.getType(),x=null;if(w=='wifi'||w=='WIFI'){x='WIFI';}else if(w=='cellular'||w=='2g'||w=='3g'||w=='wwan')x='MOBILE';return x;},getNetworkBandwidth:function v(){var w=null;if('connection' in navigator)if('downlinkMax' in navigator.connection)w=navigator.connection.downlinkMax;var x=null;try{x=parseFloat(w);}catch(y){}return x;},getAvailableQualitiesString:function v(w){return w&&w.join(', ');}};f.exports=u;}),null);
__d('VideoDownloadLogger',['Bootloader','CurrentUser','md5','MVideoUtils'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=null,m=2147483647,n='video_download';function o(){return Date.now();}function p(q){'use strict';q=q?q:{};this.$VideoDownloadLogger1=q;}p.prototype.$VideoDownloadLogger2=function(event,q){'use strict';q=babelHelpers['extends']({},q,this.$VideoDownloadLogger1);!event;if(!q.hasOwnProperty('time_ms'))q.time_ms=o();if(!q.hasOwnProperty('connectivity_type'))q.connectivity_type=k.getConnectivityType();var r={logData:q,event:event};l.post(n,r);};p.prototype.logEvent=function(event,q){'use strict';h.loadModules(["Banzai"],function(r){l=r;this.$VideoDownloadLogger2(event,q);}.bind(this),'VideoDownloadLogger');};p.time=function(){'use strict';return Math.floor(Date.now()/1000);};p.generateSessionID=function(){'use strict';return j([i.getID(),p.time(),Math.random()*m].join(':'));};f.exports=p;}),null);
__d('MVideoCache',['VideoDownloadLogger','VideoDownloadLoggerEvent','VideoDownloadLoggerFields','VideoDownloadDeleteReason','VideoDownloadReason','emptyFunction','MLegacyDataStore','URIDownloader','MVideoCacheConfig','MVideoDownloadConfig','AsyncStorage','WebStorage'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=null,s=null,t={},u=500,v=4e+09,w=0,x={audio:'audio',video:'video'};function y(aa,ba){'use strict';this.$MVideoCacheStreamObject1=aa;this.$MVideoCacheStreamObject2=ba;if(aa.chunked){this.$MVideoCacheStreamObject3=ba===x.video?aa.videoChunkCount:aa.audioChunkCount;}else this.$MVideoCacheStreamObject3=1;this.$MVideoCacheStreamObject4=0;}y.prototype.getNextBuffer=function(aa){'use strict';if(this.$MVideoCacheStreamObject4>=this.$MVideoCacheStreamObject3){aa(null);}else{var ba=this.$MVideoCacheStreamObject4++;z.getCachedStream(this.$MVideoCacheStreamObject1,this.$MVideoCacheStreamObject2,function(ca){aa(ca);},aa,this.$MVideoCacheStreamObject1.chunked?ba:null);}};var z={DEFAULT_QUALITY_TAG:'default',DOWNLOAD_STARTED_TIME:'downloadStartedTime',DOWNLOAD_REASON:'downloadReason',VIEW_COUNT:'viewCount',RESOURCE_STATE:{loading:'loading',finished:'finished',error:'error'},ERROR:{QUOTA_EXCEEDED:1,NO_ACCESS:2},isDownloadInProgress:function aa(){return !z.isEmptyObject(t);},isSupported:function aa(){try{if(!r)r=c('AsyncStorage');if(!s)s=c('WebStorage');return s.getLocalStorage()&&window.indexedDB&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota;}catch(ba){r=null;s=null;return false;}},downloadVideo:function aa(ba,ca,da,ea,fa,ga){var ha=arguments.length<=6||arguments[6]===undefined?{}:arguments[6],ia=arguments.length<=7||arguments[7]===undefined?l.USER_INITIATED:arguments[7],ja=arguments.length<=8||arguments[8]===undefined?null:arguments[8],ka=JSON.parse(ca),la=z.createVideoResource(ka,ga),ma=z.createAudioResource(ka,ga);if(!la&&!ma){ea();return;}var na=[];la&&na.push(la);ma&&na.push(ma);var oa=z.calculateTotalSize(ca,ga),pa=z.createTracking(ba,oa,da,ea,fa,ga,ha.origin,ia,ja);if(!pa){ea();return;}var qa={};qa[j.EVENT_ORIGIN]=ha.origin;qa[j.EVENT_SUBORIGIN]=ha.suborigin;z.logEventTracking(pa,i.DOWNLOAD_REQUESTED,qa);z.flushAsyncStorage(function ra(){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(sa,ta){var ua=z.getTotalSizeOfLoadingResources();if(sa+pa.totalSize+ua<z.getMaxCacheUsage()&&pa.totalSize+ua+z.getMinFreeSpace()<ta){z.downloadPostQuotaCheck(pa,la,ma);}else{var va='Used: '+sa+' Remaining: '+ta+' MaxCacheUsage: '+z.getMaxCacheUsage()+' MinFreeSpace: '+z.getMinFreeSpace();z.onError(pa,z.ERROR.QUOTA_EXCEEDED,va);}},function(){z.onError(pa,z.ERROR.QUOTA_EXCEEDED);});});},getDownloadNotificationUri:function aa(ba){var ca=JSON.parse(ba);return ca&&ca.download_finished_notification_uri;},deleteVideoByID:function aa(ba,ca,da){var ea=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];ca=ca?ca:m;var fa=z.getTracking(ba),ga={};ga[j.EVENT_ORIGIN]=ea.origin;ga[j.EVENT_SUBORIGIN]=ea.suborigin;ga[j.REASON]=da||k.USER_INITIATED;if(fa){z.logEventTracking(fa,i.DOWNLOAD_CANCELLED,ga);z.deleteTracking(fa,true);}else z.logEvent(ba,i.DOWNLOAD_DELETED,ga);z.deleteCachedVideoFromStorage(ba,ca);},calculateTotalSize:function aa(ba,ca){var da=JSON.parse(ba),ea=z.getStreamsForQuality(da,ca);return ea&&z.calculateTotalSizeInState(ea,undefined);},getQualitiesFromResources:function aa(ba){var ca=JSON.parse(ba),da=ca&&ca.streams;if(!da)return null;var ea=null,fa={};for(var ga=0;ga<da.length;ga++){var ha=da[ga],ia=String(ha.mimetype);if(ia&&ia.startsWith(x.video)){var ja=ha.hasOwnProperty('quality')&&String(ha.quality);if(ja)fa[ja]=ha.size;}else if(ia&&ia.startsWith(x.audio))ea=ha;}if(ea)for(var ka in fa)if(fa.hasOwnProperty(ka)&&fa[ka])fa[ka]+=ea.size;return fa;},deleteVideosByID:function aa(ba,ca,da){if(z.isSupported())for(var ea=0;ea<ba.length;ea++){var fa=ba[ea];z.deleteVideoByID(fa,function(){ca(fa);},da);}},isVideoDownloaded:function aa(ba){if(z.isSupported()){var ca=z.getCachedVideoByID(ba);if(ca){return true;}else return false;}return false;},isVideoDownloading:function aa(ba){if(z.isSupported())return t&&t[ba];return false;},getVideoSize:function aa(ba,ca,da){if(z.isSupported()){var ea=z.getTracking(ba);if(ea)return ea.totalSize;var fa=z.getCachedVideoByID(ba);if(fa)return fa.totalSize;if(ca){var ga=z.calculateTotalSize(ca,da);if(ga&&ga>0)return ga;}}return null;},getVideoProgressByID:function aa(ba){if(z.isSupported()){var ca=z.getTracking(ba);if(ca)return ca.loaded;}return 0;},getCachedVideoByID:function aa(ba){if(!q.enabled&&!q.simulate_legacy_ux)return null;var ca=z.createPrefix(ba),da=null;try{da=s.getLocalStorage().getItem(ca);}catch(ea){}var fa=da&&JSON.parse(da);if(fa&&!fa.hasOwnProperty('downloadStartedTime'))fa.downloadStartedTime=0;if(fa&&!fa.hasOwnProperty('downloadReason'))fa.downloadReason=l.USER_INITIATED;if(q.simulate_legacy_ux)return null;if(fa&&fa.chunked&&!q.cache_chunked_playback_enabled){setTimeout(function(){z.deleteVideoByID(ba,m,k.CHUNKED_PLAYBACK_NOT_SUPPORTED);},0);return null;}return fa;},getCachedVideosMetadata:function aa(){var ba=arguments.length<=0||arguments[0]===undefined?[]:arguments[0],ca=arguments.length<=1||arguments[1]===undefined?false:arguments[1],da={};if(!z.isSupported())return da;var ea=s.getLocalStorage(),fa=Object.keys(ea),ga=p.getUserPrefix();for(var ha in fa)if(fa.hasOwnProperty(ha)&&fa[ha])if(fa[ha].startsWith(ga)){var ia=z.getVideoIDFromStorageKey(fa[ha]),ja={};if(ba.length>0){var ka=null;try{ka=ea.getItem(fa[ha]);}catch(la){if(!ca)continue;}var ma=ka&&JSON.parse(ka);if((!ma||ma.chunked&&!q.cache_chunked_playback_enabled)&&!ca)continue;for(var na=0;na<ba.length;na++){var oa=ba[na];if(ma&&oa in ma)ja[oa]=ma[oa];}}da[ia]=ja;}return da;},getCachedVideoIDs:function aa(){var ba=arguments.length<=0||arguments[0]===undefined?false:arguments[0];return Object.keys(z.getCachedVideosMetadata(ba));},hasDownloadedVideos:function aa(){var ba=z.getCachedVideoIDs();return ba&&ba.length&&ba.length>0;},getDownloadingVideos:function aa(){var ba=Object.keys(t);return ba;},getVideoIDFromStorageKey:function aa(ba){var ca=p.PREFIX_SEPARATOR;return ba.split(ca)[2]||'';},getCachedVideo:function aa(ba){var ca=n.get(ba);return z.getCachedVideoByID(ca.videoID);},getCachedVideoStream:function aa(ba,ca,da){z.getCachedStream(ba,x.video,ca,da);},getCachedAudioStream:function aa(ba,ca,da){z.getCachedStream(ba,x.audio,ca,da);},getCachedVideoStreamObject:function aa(ba){return new y(ba,x.video);},getCachedAudioStreamObject:function aa(ba){return new y(ba,x.audio);},getMaxCacheUsage:function aa(){var ba=v;if(q&&q.hasOwnProperty('max_cache_usage'))ba=q.max_cache_usage;return ba;},getMinFreeSpace:function aa(){var ba=w;if(q&&q.hasOwnProperty('min_free_space'))ba=q.min_free_space;return ba;},downloadPostQuotaCheck:function aa(ba,ca,da){if(!z.addTracking(ba)){z.onError(ba);return;}ca&&z.sendResourceRequest(ba,ca);da&&z.sendResourceRequest(ba,da);},calculateTotalSizeInState:function aa(ba,ca){var da,ea=0,fa=ba.length;for(da=0;da<fa;da++){var ga=ba[da];if(!ca||ga.state===ca)ea+=ga.size;}return ea;},isEmptyObject:function aa(ba){for(var ca in ba)if(ba.hasOwnProperty(ca)&&ba[ca])return false;return true;},getTotalSizeOfLoadingResources:function aa(){var ba=0;for(var ca in t)if(t.hasOwnProperty(ca)&&t[ca]){var da=t[ca];ba+=z.calculateTotalSizeInState(da.resources,z.RESOURCE_STATE.loading);}return ba;},deleteCachedVideoFromStorage:function aa(ba,ca){var da=z.createPrefix(ba);try{s.getLocalStorage().removeItem(da);}catch(ea){}z.getObjectKeysFromAsyncStorageByPrefix(da,function(fa,ga){if(fa||!ga){ca();return;}try{r.multiRemove(ga,function(){ca();});}catch(ha){ca();}});},flushAsyncStorage:function aa(ba){var ca=z.createPrefix(0),da=['0'],ea=new Blob(da,{type:'text/html'});try{r.setItem(ca,ea,function(){try{r.removeItem(ca,function(){ba();});}catch(ha){ba();}});}catch(fa){try{r.removeItem(ca,function(){ba();});}catch(ga){ba();}}},getObjectKeysFromAsyncStorageByPrefix:function aa(ba,ca){try{r.getAllKeys(function(ea,fa){if(ea||!fa){ca(ea);return;}fa=fa.filter(function(ga){return ga.startsWith(ba);});ca(null,fa);});}catch(da){ca(da);}},getVideosFromAsyncStorage:function aa(ba){z.getObjectKeysFromAsyncStorageByPrefix(p.getUserPrefix(),function(ca,da){if(ca||!da){ba(ca);return;}var ea=da.map(z.getVideoIDFromStorageKey),fa=ea.reduce(function(ga,ha){ga[ha]=true;return ga;},{});ba(null,Object.keys(fa));});},makeLocalAsyncStorageConsistent:function aa(ba,ca){var da=z.getCachedVideoIDs(true);z.getVideosFromAsyncStorage(function(ea,fa){if(ea||!fa){ba();return;}var ga={},ha=da.concat(fa);ha.forEach(function(ia){if(!ga[ia]){ga[ia]=1;}else ga[ia]++;});ga=Object.keys(ga).filter(function(ia){return ga[ia]===1;});if(ga.length>0)z.deleteVideosByID(ga,ca,k.CONSISTENCY_CHECK);ba();});},getCachedStream:function aa(ba,ca,da,ea,fa){var ga=z.createPrefix(ba.videoID,ca,fa);try{r.getItem(ga,function(ia,ja){if(ia){z.deleteVideoByID(ba.videoID);ea();}else da(ja);});}catch(ha){z.deleteVideoByID(ba.videoID);ea();}},saveVideoInLocalStorage:function aa(ba){var ca=ba.videoID&&z.createPrefix(ba.videoID);try{s.getLocalStorage().setItem(ca,JSON.stringify(ba));}catch(da){throw da;}},saveCachedVideo:function aa(ba){var ca={};ca.downloadStartedTime=ba.downloadStartedTime;ca.downloadReason=ba.downloadReason;ca.videoID=ba.videoID;ca.quality=ba.quality;ca.audioCodec=z.getResourceCodec(ba,x.audio);ca.videoCodec=z.getResourceCodec(ba,x.video);ca.totalSize=ba.totalSize;ca.viewCount=0;ca.sessionID=ba.sessionID;ca.downloadOrigin=ba.origin;ca.chunked=ba.chunked;ca.videoChunkCount=ba.videoChunkCount;ca.audioChunkCount=ba.audioChunkCount;z.saveVideoInLocalStorage(ca);},logPlaybackRequest:function aa(ba,ca,da){var ea=null;if(ca){var fa=z.getCachedVideoByID(ba),ga=fa.viewCount||0;fa.viewCount=ga+1;z.saveVideoInLocalStorage(fa);}else ea=z.ERROR.NO_ACCESS;var ha={};ha[j.ERROR_CODE]=ea;ha[j.REASON]=da;z.logEvent(ba,i.REQUESTED_PLAYING,ha);},createPrefix:function aa(ba,ca,da){var ea=p.getUserPrefix()+ba+p.PREFIX_SEPARATOR+z.DEFAULT_QUALITY_TAG;if(ca)ea=ea+p.PREFIX_SEPARATOR+ca;if(da!=undefined&&da!=null)ea=ea+p.PREFIX_SEPARATOR+da;return ea;},createResource:function aa(ba,ca,da,ea){var fa={};fa.src=ba;fa.type=ca;fa.state=z.RESOURCE_STATE.loading;fa.codec=da;fa.size=ea;fa.progress=0;return fa;},getDefaultVideoStream:function aa(ba){var ca=null;for(var da=0;da<ba.length;da++){var ea=ba[da],fa=String(ea.mimetype);if(fa&&fa.startsWith(x.video)){ca=ea;if(ea['default'])return ea;}}return ca;},getStreamsForQuality:function aa(ba,ca){var da=[],ea=ba&&ba.streams,fa=false,ga=false;for(var ha=0;ha<ea.length;ha++){var ia=ea[ha],ja=String(ia.mimetype);if(ja&&ja.startsWith(x.video)&&!fa){var ka=String(ia.quality);if(ca&&ka&&ka===ca)fa=!!da.push(ia);}else if(ja&&ja.startsWith(x.audio)&&!ga)ga=!!da.push(ia);}if(!fa){var la=z.getDefaultVideoStream(ea);la&&da.push(la);}return da;},getUrlInfo:function aa(ba,ca,da){var ea=z.getStreamsForQuality(ba,da);if(!ea)return null;var fa=null;for(var ga=0;ga<ea.length;ga++){var ha=ea[ga],ia=String(ha.mimetype);if(ia&&ia.startsWith(ca)){fa=ha;break;}}return fa;},createVideoResource:function aa(ba,ca){var da=z.getUrlInfo(ba,x.video,ca);return da&&z.createResource(da.url,x.video,da.codecs,da.size);},createAudioResource:function aa(ba,ca){var da=z.getUrlInfo(ba,x.audio,ca);return da&&z.createResource(da.url,x.audio,da.codecs,da.size);},addTracking:function aa(ba){if(t[ba.videoID])return false;t[ba.videoID]=ba;return true;},createTracking:function aa(ba,ca,da,ea,fa,ga,ha,ia,ja){var ka={};ka.videoID=ba;ka.quality=ga||z.DEFAULT_QUALITY_TAG;ka.onDone=da;ka.onError=ea;ka.onProgress=fa;ka.resources=[];ka.deleted=false;ka.loaded=0;ka.totalSize=ca;ka.sessionID=h.generateSessionID();ka.origin=ha;ka.logger=z.createLogger(ka);ka.downloadStartedTime=Date.now();ka.chunked=q.cache_chunked_storage_enabled;ka.loggingDataCallback=ja;ka.downloadReason=ia;return ka;},getTracking:function aa(ba){return t[ba];},deleteTracking:function aa(ba,ca){if(!ba.deleted){ba.deleted=true;t[ba.videoID]=null;if(ca){var da;for(da=0;da<ba.resources.length;da++)try{ba.resources[da].downloader&&ba.resources[da].downloader.abort();}catch(ea){}}}},getResourceCodec:function aa(ba,ca){var da,ea,fa;fa=ba.resources.length;for(ea=0;ea<fa;ea++){da=ba.resources[ea];if(da.type===ca)return da.codec;}return null;},updateTracking:function aa(ba,ca,da){var ea,fa,ga;if(ba.deleted)return;if(da)ca.state=da;if(ca.state===z.RESOURCE_STATE.finished)if(ca.type===x.video){ba.videoChunkCount=ca.chunkCount;}else if(ca.type===x.audio)ba.audioChunkCount=ca.chunkCount;if(ca.state===z.RESOURCE_STATE.loading){ba.resources.push(ca);}else{var ha=z.RESOURCE_STATE.finished;fa=ba.resources.length;for(ea=0;ea<fa;ea++){ga=ba.resources[ea];if(ga.state===z.RESOURCE_STATE.loading){ha=z.RESOURCE_STATE.loading;break;}else if(ga.state===z.RESOURCE_STATE.error)ha=z.RESOURCE_STATE.error;}if(ha===z.RESOURCE_STATE.error){z.deleteTracking(ba);z.deleteCachedVideoFromStorage(ba.videoID,function(){z.onError(ba);});}else if(ha===z.RESOURCE_STATE.finished)try{z.saveCachedVideo(ba);z.deleteTracking(ba);z.onDone(ba);}catch(ia){z.deleteCachedVideoFromStorage(ba.videoID,function(){z.onError(ba);});}}},trackProgress:function aa(ba){var ca=0;for(var da in ba.resources)if(ba.resources.hasOwnProperty(da))ca+=ba.resources[da].progress;ba.loaded=ca;var ea={};ea[j.BYTES_DOWNLOADED]=ba.loaded;z.logEventTracking(ba,i.DOWNLOAD_PROGRESS,ea);return ca;},sendResourceRequest:function aa(ba,ca){var da=new o(ca.src,ca.size);if(ba.chunked){da.setChunkedResponseHandler(function(ea){try{var ga=[];for(var ha=0;ha<ea.length;ha++){var ia=[],ja=z.createPrefix(ba.videoID,ca.type,ha);ia.push(ja);var ka=ea[ha];ia.push(ka);ga.push(ia);}r.multiSet(ga,function(la){ca.chunkCount=ea.length;z.updateTracking(ba,ca,la?z.RESOURCE_STATE.error:z.RESOURCE_STATE.finished);});}catch(fa){z.updateTracking(ba,ca,z.RESOURCE_STATE.error);}});}else da.setResponseHandler(function(ea){try{var ga=z.createPrefix(ba.videoID,ca.type);r.setItem(ga,ea,function(ha){z.updateTracking(ba,ca,ha?z.RESOURCE_STATE.error:z.RESOURCE_STATE.finished);});}catch(fa){z.updateTracking(ba,ca,z.RESOURCE_STATE.error);}});da.setErrorHandler(function(){z.updateTracking(ba,ca,z.RESOURCE_STATE.error);});da.setProgressHandler(function(ea){if(ea.total){ca.progress=ea.loaded;ba.onProgress(z.trackProgress(ba),ba.totalSize);}});da.setAbortHandler(function(){setTimeout(function(){z.updateTracking(ba,ca,z.RESOURCE_STATE.error);},u);});z.updateTracking(ba,ca);ca.downloader=da;da.sendRequest();},createLogger:function aa(ba){var ca={};ca[j.DOWNLOAD_ORIGIN]=ba.origin;ca[j.QUALITY]=ba.quality;ca[j.SESSION_ID]=ba.sessionID;ca[j.TOTAL_SIZE]=ba.totalSize;ca[j.VIDEO_ID]=ba.videoID;return new h(ca);},getLogger:function aa(ba){if(!ba.logger)return null;return ba.logger;},logEvent:function aa(ba,event,ca){var da=new h();ca=ca||{};ca[j.VIDEO_ID]=ba;var ea=z.getCachedVideoByID(ba);if(ea){ca[j.DOWNLOAD_ORIGIN]=ea.downloadOrigin;ca[j.SESSION_ID]=ea.sessionID;ca[j.TOTAL_SIZE]=ea.totalSize;ca[j.QUALITY]=ca[j.QUALITY]?ca[j.QUALITY]:ea.quality;ca[j.SAVED_OFFLINE]=1;}da.logEvent(event,ca);},logEventTracking:function aa(ba,event,ca){var da=this.getLogger(ba);ca=ca||{};if(!ca.hasOwnProperty(j.REASON))ca[j.REASON]=ba.downloadReason;if(ba.loggingDataCallback){var ea=ba.loggingDataCallback;ca=ea(ca);}ca[j.ELAPSED_TIME_MS]=Date.now()-ba.downloadStartedTime;da.logEvent(event,ca);},onError:function aa(ba,ca,da){var ea={};ea[j.ERROR_CODE]=ca;ea[j.ERROR]=da;z.logEventTracking(ba,i.DOWNLOAD_FAILED,ea);ba.onError(ca);},onDone:function aa(ba){z.logEventTracking(ba,i.DOWNLOAD_FINISHED);ba.onDone();}};f.exports=z;}),null);
__d('MVideoDownloadState',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={DOWNLOADING:'downloading',DOWNLOADED:'downloaded',DELETING:'deleting',NOTDOWNLOADED:'notdownloaded'};f.exports=h;}),null);
__d('MVideoDownloadStateHandler',['MVideoDownloadState','MVideoCache'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=null;function k(){'use strict';this.$MVideoDownloadStateHandler1={};this.$MVideoDownloadStateHandler2={};}k.prototype.addListener=function(l,m){'use strict';if(!this.$MVideoDownloadStateHandler1[l])this.$MVideoDownloadStateHandler1[l]=[];this.$MVideoDownloadStateHandler1[l].push(m);};k.removeListeners=function(l){'use strict';if(this.$MVideoDownloadStateHandler3().$MVideoDownloadStateHandler1[l])this.$MVideoDownloadStateHandler3().$MVideoDownloadStateHandler1[l]=[];};k.prototype.setState=function(l,m){'use strict';l.forEach(function(n){this.$MVideoDownloadStateHandler2[n]=m;if(!this.$MVideoDownloadStateHandler1[n])return;var o=this.$MVideoDownloadStateHandler1[n];o.forEach(function(p){try{p.call(window,m);}catch(q){}});},this);};k.prototype.getState=function(l){'use strict';return this.$MVideoDownloadStateHandler2[l];};k.$MVideoDownloadStateHandler3=function(){'use strict';if(!j)j=new k();return j;};k.listen=function(l,m){'use strict';this.$MVideoDownloadStateHandler3().addListener(l,m);this.initializeState(l);};k.initializeState=function(l){'use strict';if(i.isVideoDownloaded(l)){k.downloaded([l]);}else if(i.isVideoDownloading(l)){k.downloading([l],i.getVideoProgressByID(l),i.getVideoSize(l));}else k.deleted([l]);};k.getState=function(l){'use strict';return this.$MVideoDownloadStateHandler3().getState(l);};k.downloading=function(l,m,n){'use strict';this.$MVideoDownloadStateHandler3().setState(l,{state:h.DOWNLOADING,loaded:m,total:n});};k.downloaded=function(l){'use strict';this.$MVideoDownloadStateHandler3().setState(l,{state:h.DOWNLOADED});};k.cleanup=function(l){'use strict';this.$MVideoDownloadStateHandler3().setState(l,{state:h.DELETING});};k.deleted=function(l,m){'use strict';this.$MVideoDownloadStateHandler3().setState(l,{state:h.NOTDOWNLOADED,errorMessage:m});};f.exports=k;}),null);
__d("XVideoCacheCleanUpController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video_cache_cleanup\/",{video_ids:{type:"StringVector",required:true}});}),null);
__d('MVideoCacheCleanUp',['MVideoCache','MVideoCacheConfig','MVideoDownloadStateHandler','MRequest','XVideoCacheCleanUpController','MVideoDownloadConfig','setTimeoutAcrossTransitions','VideoDownloadReason','VideoDownloadDeleteReason'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=10000,r=null,s={clean:function t(){s.deleteStaleAutoDownloadedVideos();r=null;var u=h.getCachedVideoIDs(true);if(u.length==0){s.setLastCleanUpDate();return;}var v=l.getURIBuilder().setStringVector('video_ids',u).getURI(),w=new k(v);w.setMethod('POST');w.listen('done',function(x){var y=x.payload||{};if(!y.error){s.setLastCleanUpDate();var z=[].concat(y.offlineDisabled,y.unaccessible,y.unsaved);if(z.length>0)s.deleteVideosByID(z);}});w.send();},deleteStaleAutoDownloadedVideos:function t(){var u=h.getCachedVideosMetadata([h.DOWNLOAD_STARTED_TIME,h.DOWNLOAD_REASON]),v=[],w=Date.now()-m.cache_auto_downloaded_videos_caching_interval_ms;for(var x in u){var y=u[x];if(y.downloadReason===o.AUTO_INITIATED&&y.downloadStartedTime<w)v.push(x);}if(v.length>0)s.deleteVideosByID(v);},deleteVideosByID:function t(u){h.deleteVideosByID(u,function(v){j.deleted([v]);},p.CACHE_SYNC);},requestCleanUp:function t(){if(i.isSupported()&&h.isSupported()){var u=s.getLastCleanUpDate(),v=Date.now()-m.cache_sync_interval_ms,w=u<v;if(w&&!r)r=n(function(){h.makeLocalAsyncStorageConsistent(s.clean,function(x){j.deleted([x]);});},q);}},getLastCleanUpDate:function t(){if(i.isSupported()){return i.getItemFromConfig(i.KEYS.lastCleanUp);}else return 0;},setLastCleanUpDate:function t(){if(i.isSupported()){var u=Date.now();i.setItemFromConfig(i.KEYS.lastCleanUp,u);}},checkAccess:function t(u){var v=u.downloadStartedTime,w=s.getLastCleanUpDate(),x=Math.max(v,w),y=Date.now();s.requestCleanUp();var z=x+m.allowed_offline_access_interval_ms,aa=z>y;return aa;}};f.exports=s;}),null);
__d('MVideoPlaybackState',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={NORMAL_PLAYBACK:'normalplayback',SLOW_PLAYBACK:'slowplayback',NOT_STARTED_PLAYBACK:'notstartedplayback'};f.exports=h;}),null);
__d('MVideoDownloadStrings',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoCache','MVideoUtils','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(){'use strict';}n.prototype.$MVideoDownloadStrings1=function(o){'use strict';m(0);};n.prototype.downloadControlPlayButtonHeader=function(o){'use strict';this.$MVideoDownloadStrings1('downloadControlPlayButtonHeader');return '';};n.prototype.downloadControlPlayButtonSubheader=function(o,p){'use strict';this.$MVideoDownloadStrings1('downloadControlPlayButtonSubheader');return '';};n.prototype.downloadControlCancelButtonHeader=function(o,p){'use strict';this.$MVideoDownloadStrings1('downloadControlCancelButtonHeader');return '';};n.prototype.downloadControlCancelButtonSubheader=function(o,p){'use strict';this.$MVideoDownloadStrings1('downloadControlCancelButtonSubheader');return '';};n.prototype.downloadControlDownloadButtonHeader=function(o,p,q){'use strict';this.$MVideoDownloadStrings1('downloadControlDownloadButtonHeader');return '';};n.prototype.downloadControlDownloadButtonSubheader=function(o,p,q){'use strict';this.$MVideoDownloadStrings1('downloadControlDownloadButtonSubheader');return '';};n.prototype.downloadControlSpinnerText=function(o,p){'use strict';this.$MVideoDownloadStrings1('downloadControlSpinnerText');return '';};n.prototype.downloadControlErrorMessage=function(o){'use strict';this.$MVideoDownloadStrings1('downloadControlErrorMessage');return '';};n.prototype.downloadControlDownloadInProgressMessage=function(){'use strict';this.$MVideoDownloadStrings1('downloadControlDownloadInProgressMessage');return '';};n.prototype.saveDashboardDownloadActionTitle=function(o){'use strict';this.$MVideoDownloadStrings1('saveDashboardDownloadActionTitle');return '';};n.prototype.saveDashboardArchiveActionSubtitle=function(o){'use strict';return h._("\u91cb\u51fa{size}\uff0c\u4f46\u5c07\u8cbc\u6587\u5132\u5b58\u70ba\u5c01\u5b58\u6a94",[h.param('size',l.getHumanReadbleSize(o.totalSize))]);};n.prototype.newsFeedChevronActionTitle=function(o,p){'use strict';this.$MVideoDownloadStrings1('newsFeedChevronActionTitle');return '';};n.prototype.newsFeedChevronActionSubtitle=function(o,p){'use strict';var q='';switch(o){case i.NOTDOWNLOADED:q=h._("\u7a0d\u5f8c\u518d\u89c0\u770b\u5f71\u7247\uff0c\u7121\u9700\u4f7f\u7528\u984d\u5916\u8cc7\u8cbb");break;case i.DOWNLOADED:q=h._("\u91cb\u653e{size}",[h.param('size',l.getHumanReadbleSize(p.totalSize))]);break;}return q;};n.prototype.downloadDialogUnavailableTitle=function(){'use strict';return h._("\u5f71\u7247\u5df2\u7121\u6cd5\u63d0\u4f9b");};n.prototype.downloadDialogUnavailableDescription=function(){'use strict';return h._("\u8acb\u9023\u7dda\u5230\u7db2\u969b\u7db2\u8def\uff0c\u7136\u5f8c\u518d\u8a66\u4e00\u6b21\u3002");};n.prototype.downloadDialogUnavailableDismissButton=function(){'use strict';return h._("\u597d");};n.prototype.downloadControlQualitySelectorTitle=function(){'use strict';this.$MVideoDownloadStrings1('downloadControlQualitySelectorTitle');return '';};n.prototype.downloadControlQualitySelectorDescription=function(){'use strict';return h._("\u5728\u4e0d\u4f7f\u7528\u984d\u5916\u6578\u64da\u7684\u60c5\u6cc1\u4e0b\u96e2\u7dda\u89c0\u770b\u5f71\u7247");};n.prototype.downloadControlQualitySelectorQualityText=function(o){'use strict';this.$MVideoDownloadStrings1('downloadControlQualitySelectorQualityText');return '';};n.prototype.downloadProgressSubtitleText=function(o,p){'use strict';var q=Math.floor(o/p*100);return h._("\u9032\u884c\u4e2d{percentage}\u0025 {separator}{size}",[h.param('percentage',q),h.param('separator',this.middotSeparator()),h.param('size',l.getHumanReadbleSize(p))]);};n.prototype.downloadSurveyDialogTitle=function(){'use strict';return h._("\u6211\u5011\u975e\u5e38\u6a02\u610f\u807d\u53d6\u60a8\u7684\u610f\u898b\u3002");};n.prototype.downloadSurveyDialogDescription=function(){'use strict';return h._("\u53ef\u4ee5\u8acb\u60a8\u56de\u7b54\u5e7e\u500b\u6709\u95dc\u9ad4\u9a57\u7684\u554f\u984c\u55ce\uff1f");};n.prototype.downloadSurveyDialogDismissButton=function(){'use strict';return h._("\u7565\u904e");};n.prototype.downloadSurveyDialogConfirmButton=function(){'use strict';return h._("\u958b\u59cb\u586b\u5beb\u554f\u5377\u8abf\u67e5");};n.prototype.middotSeparator=function(){'use strict';return ' \u00B7 ';};f.exports=n;}),null);
__d('MVideoDownloadStringsCollectionDownloadToFacebook',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoDownloadStrings','MVideoCache','MVideoUtils','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o,p;if(c.__markCompiled)c.__markCompiled();o=babelHelpers.inherits(q,k);p=o&&o.prototype;function q(){p.constructor.call(this);}q.prototype.downloadControlPlayButtonHeader=function(r){var s='';switch(r){case i.NOTDOWNLOADED:s=h._("\u64ad\u653e");break;case i.DOWNLOADED:s=h._("\u5df2\u4e0b\u8f09\u5230 Facebook");break;}return s;};q.prototype.downloadControlPlayButtonSubheader=function(r,s){var t='';switch(r){case i.NOTDOWNLOADED:t=h._("\u7acb\u5373\u89c0\u770b");break;case i.DOWNLOADED:!(s!=null)?n(0):void 0;t=h._("{size}",[h.param('size',m.getHumanReadbleSize(s.size))]);break;}return t;};q.prototype.downloadControlCancelButtonHeader=function(r,s){var t='';switch(r){case i.DOWNLOADING:t=h._("{size}",[h.param('size',m.getHumanReadbleSize(s.total))]);break;}return t;};q.prototype.downloadControlCancelButtonSubheader=function(r,s){var t='';switch(r){case i.DOWNLOADING:var u=m.getDownloadProgressPercentage(s.loaded,s.total);t=h._("{percentage}\u0025",[h.param('percentage',u)]);break;}return t;};q.prototype.downloadControlDownloadButtonHeader=function(r,s,t){var u='';if(s===j.SLOW_PLAYBACK||r===i.NOTDOWNLOADED)u=h._("\u4e0b\u8f09\u5230 Facebook");return u;};q.prototype.downloadControlDownloadButtonSubheader=function(r,s,t){var u='';if(s===j.SLOW_PLAYBACK||r===i.NOTDOWNLOADED)u=h._("{size}",[h.param('size',m.getHumanReadbleSize(t.size))]);return u;};q.prototype.downloadControlSpinnerText=function(r,s){var t='';if(s===j.SLOW_PLAYBACK)t=h._("\u9023\u7dda\u4e0d\u4f73\u3002\u7121\u6cd5\u64ad\u653e\u3002");return t;};q.prototype.downloadControlErrorMessage=function(r){var s='';if(r===l.ERROR.QUOTA_EXCEEDED){s=h._("\u88dd\u7f6e\u7a7a\u9593\u4e0d\u8db3\uff0c\u7121\u6cd5\u4e0b\u8f09\u5230 Facebook\u3002");}else s=h._("\u56e0\u70ba\u9023\u7dda\u4e0d\u4f73\uff0c\u7121\u6cd5\u4e0b\u8f09 Facebook\u3002");return s;};q.prototype.downloadControlDownloadInProgressMessage=function(){return h._("\u96e2\u958b\u6b64\u9801\u9762\u5c07\u53d6\u6d88\u76ee\u524d\u4e0b\u8f09\u5230 Facebook \u7684\u4f5c\u696d\u3002");};q.prototype.saveDashboardDownloadActionTitle=function(r){return h._("\u4e0b\u8f09\u5230 Facebook\uff08{size}\uff09",[h.param('size',m.getHumanReadbleSize(r.totalSize))]);};q.prototype.newsFeedChevronActionTitle=function(r,s){var t='';switch(r){case i.NOTDOWNLOADED:var u=m.getHumanReadbleSize(s.totalSize);t=h._("\u4e0b\u8f09\u5230 Facebook\uff08{size}\uff09",[h.param('size',u)]);break;case i.DOWNLOADED:t=h._("\u5f9e Facebook \u79fb\u9664\u4e0b\u8f09");break;case i.DOWNLOADING:t=h._("\u53d6\u6d88\u4e0b\u8f09\u5230 Facebook");break;}return t;};f.exports=q;}),null);
__d('MVideoDownloadStringsCollectionDownloadToFacebookUIOnlyIcon',['fbt','MVideoDownloadState','MVideoDownloadStringsCollectionDownloadToFacebook','MVideoUtils','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,j);n=m&&m.prototype;function o(){'use strict';n.constructor.call(this);}o.prototype.downloadControlPlayButtonHeader=function(p){'use strict';var q='';switch(p){case i.NOTDOWNLOADED:q='';break;case i.DOWNLOADED:q=h._("\u5df2\u4e0b\u8f09\u5230 Facebook");break;}return q;};o.prototype.downloadControlPlayButtonSubheader=function(p,q){'use strict';var r='';switch(p){case i.NOTDOWNLOADED:r='';break;case i.DOWNLOADED:!(q!=null)?l(0):void 0;r=h._("{size}",[h.param('size',k.getHumanReadbleSize(q.size))]);break;}return r;};f.exports=o;}),null);
__d('MVideoDownloadStringsCollectionDownloadToFacebookUIv3',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoDownloadStringsCollectionDownloadToFacebook','MVideoUtils','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();var p=' \u00B7 ';n=babelHelpers.inherits(q,k);o=n&&n.prototype;function q(){'use strict';o.constructor.call(this);}q.prototype.downloadControlPlayButtonHeader=function(r){'use strict';var s='';switch(r){case i.NOTDOWNLOADED:s='';break;case i.DOWNLOADED:s=h._("\u5df2\u4e0b\u8f09\u5230 Facebook");break;}return s;};q.prototype.downloadControlPlayButtonSubheader=function(r,s){'use strict';var t='';switch(r){case i.NOTDOWNLOADED:t='';break;case i.DOWNLOADED:!(s!=null)?m(0):void 0;t=h._("{size}",[h.param('size',l.getHumanReadbleSize(s.size))]);break;}return t;};q.prototype.downloadControlCancelButtonHeader=function(r,s){'use strict';var t='';switch(r){case i.DOWNLOADING:var u=l.getDownloadProgressPercentage(s.loaded,s.total);t=h._("\u6b63\u5728\u4e0b\u8f09\u5230 Facebook{separator}{percentage}\u0025",[h.param('separator',p),h.param('percentage',u)]);break;}return t;};q.prototype.downloadControlCancelButtonSubheader=function(r,s){'use strict';var t='';switch(r){case i.DOWNLOADING:t=h._("{size}",[h.param('size',l.getHumanReadbleSize(s.total))]);break;}return t;};q.prototype.downloadControlDownloadButtonHeader=function(r,s,t){'use strict';var u='';if(s===j.SLOW_PLAYBACK||r===i.NOTDOWNLOADED){u=h._("\u4e0b\u8f09\u5230 Facebook");}else if(r===i.DOWNLOADED)u=h._("\u5df2\u4e0b\u8f09\u5230 Facebook");return u;};q.prototype.downloadControlDownloadButtonSubheader=function(r,s,t){'use strict';var u='';if(s===j.SLOW_PLAYBACK||r===i.NOTDOWNLOADED||r===i.DOWNLOADED)u=h._("{size}",[h.param('size',l.getHumanReadbleSize(t.size))]);return u;};f.exports=q;}),null);
__d('MVideoDownloadStringsCollectionDownloadToFacebookUIv3QualitySelector',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoDownloadStringsCollectionDownloadToFacebookUIv3','MVideoUtils'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(){'use strict';n.constructor.call(this);}o.prototype.downloadControlDownloadButtonSubheader=function(p,q,r){'use strict';var s='';if(q===j.SLOW_PLAYBACK||p===i.DOWNLOADED||p===i.NOTDOWNLOADED&&r.showInNotDownloadedState)s=h._("{size}",[h.param('size',l.getHumanReadbleSize(r.size))]);return s;};o.prototype.downloadControlQualitySelectorTitle=function(){'use strict';return h._("\u4e0b\u8f09\u5230 Facebook");};o.prototype.downloadControlQualitySelectorQualityText=function(p){'use strict';return h._("{quality}",[h.param('quality',p)]);};f.exports=o;}),null);
__d('MVideoDownloadStringsCollectionDownloadUIv3',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoCache','MVideoDownloadStrings','MVideoUtils','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();var q=' \u00B7 ';o=babelHelpers.inherits(r,l);p=o&&o.prototype;function r(){'use strict';p.constructor.call(this);}r.prototype.downloadControlPlayButtonHeader=function(s){'use strict';var t='';switch(s){case i.NOTDOWNLOADED:t='';break;case i.DOWNLOADED:t=h._("\u5df2\u4e0b\u8f09");break;}return t;};r.prototype.downloadControlPlayButtonSubheader=function(s,t){'use strict';var u='';switch(s){case i.NOTDOWNLOADED:u='';break;case i.DOWNLOADED:!(t!=null)?n(0):void 0;u=h._("{size}",[h.param('size',m.getHumanReadbleSize(t.size))]);break;}return u;};r.prototype.downloadControlCancelButtonHeader=function(s,t){'use strict';var u='';switch(s){case i.DOWNLOADING:var v=m.getDownloadProgressPercentage(t.loaded,t.total);u=h._("\u4e0b\u8f09\u9032\u5ea6{separator}{percentage}\u0025",[h.param('separator',q),h.param('percentage',v)]);break;}return u;};r.prototype.downloadControlCancelButtonSubheader=function(s,t){'use strict';var u='';switch(s){case i.DOWNLOADING:u=h._("{size}",[h.param('size',m.getHumanReadbleSize(t.total))]);break;}return u;};r.prototype.downloadControlDownloadButtonHeader=function(s,t,u){'use strict';var v='';if(t===j.SLOW_PLAYBACK||s===i.NOTDOWNLOADED){v=h._("\u4e0b\u8f09");}else if(s===i.DOWNLOADED)v=h._("\u5df2\u4e0b\u8f09");return v;};r.prototype.downloadControlDownloadButtonSubheader=function(s,t,u){'use strict';var v='';if(t===j.SLOW_PLAYBACK||s===i.NOTDOWNLOADED||s===i.DOWNLOADED)v=h._("{size}",[h.param('size',m.getHumanReadbleSize(u.size))]);return v;};r.prototype.downloadControlSpinnerText=function(s,t){'use strict';var u='';if(t===j.SLOW_PLAYBACK)u=h._("\u9023\u7dda\u4e0d\u4f73\u3002\u7121\u6cd5\u64ad\u653e\u3002");return u;};r.prototype.downloadControlErrorMessage=function(s){'use strict';var t='';if(s===k.ERROR.QUOTA_EXCEEDED){t=h._("\u88dd\u7f6e\u7a7a\u9593\u4e0d\u8db3\uff0c\u7121\u6cd5\u4e0b\u8f09\u3002");}else t=h._("\u9023\u7dda\u4e0d\u4f73\uff0c\u7121\u6cd5\u4e0b\u8f09\u3002");return t;};r.prototype.downloadControlDownloadInProgressMessage=function(){'use strict';return h._("\u96e2\u958b\u6b64\u9801\u9762\u5c07\u53d6\u6d88\u76ee\u524d\u7684\u4e0b\u8f09\u4f5c\u696d\u3002");};r.prototype.saveDashboardDownloadActionTitle=function(s){'use strict';return h._("\u4e0b\u8f09\uff08{size}\uff09",[h.param('size',m.getHumanReadbleSize(s.totalSize))]);};r.prototype.newsFeedChevronActionTitle=function(s,t){'use strict';var u='';switch(s){case i.NOTDOWNLOADED:var v=m.getHumanReadbleSize(t.totalSize);u=h._("\u4e0b\u8f09\uff08{size}\uff09",[h.param('size',v)]);break;case i.DOWNLOADED:u=h._("\u79fb\u9664\u4e0b\u8f09");break;case i.DOWNLOADING:u=h._("\u53d6\u6d88\u4e0b\u8f09");break;}return u;};f.exports=r;}),null);
__d('MVideoDownloadStringsCollectionDownloadUIv3DsHidden',['fbt','MVideoDownloadState','MVideoDownloadStringsCollectionDownloadUIv3','MVideoPlaybackState','MVideoUtils'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,j);n=m&&m.prototype;function o(){'use strict';n.constructor.call(this);}o.prototype.downloadControlCancelButtonHeader=function(p,q){'use strict';var r='';switch(p){case i.DOWNLOADING:r=h._("{size}",[h.param('size',l.getHumanReadbleSize(q.total))]);break;}return r;};o.prototype.downloadControlCancelButtonSubheader=function(p,q){'use strict';var r='';switch(p){case i.DOWNLOADING:var s=l.getDownloadProgressPercentage(q.loaded,q.total);r=h._("{percentage}\u0025",[h.param('percentage',s)]);break;}return r;};o.prototype.downloadControlSpinnerText=function(p,q){'use strict';var r='';if(q===k.SLOW_PLAYBACK)r=h._("\u9023\u7dda\u8a0a\u865f\u4e0d\u4f73\uff0c\u8acb\u5617\u8a66\u6539\u70ba\u4e0b\u8f09\u3002");return r;};f.exports=o;}),null);
__d('MVideoDownloadStringsCollectionDownloadUIv3DsHiddenAutoBuffering',['fbt','invariant','MVideoCache','MVideoDownloadState','MVideoDownloadStrings','MVideoPlaybackState','MVideoUtils'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();o=babelHelpers.inherits(q,l);p=o&&o.prototype;function q(){'use strict';p.constructor.call(this);}q.prototype.downloadControlCancelButtonHeader=function(r,s){'use strict';var t='';switch(r){case k.DOWNLOADING:t=h._("\u7de9\u885d\u4e2d");break;}return t;};q.prototype.downloadControlCancelButtonSubheader=function(r,s){'use strict';var t='';switch(r){case k.DOWNLOADING:var u=n.getDownloadProgressPercentage(s.loaded,s.total);t=h._("{percentage}\u0025",[h.param('percentage',u)]);break;}return t;};q.prototype.downloadControlSpinnerText=function(r,s){'use strict';var t='';if(s===m.SLOW_PLAYBACK)t=h._("\u9023\u7dda\u8a0a\u865f\u4e0d\u4f73\uff0c\u8acb\u5617\u8a66\u6539\u70ba\u7de9\u885d\u3002");return t;};q.prototype.downloadControlPlayButtonHeader=function(r){'use strict';var s='';switch(r){case k.NOTDOWNLOADED:s='';break;case k.DOWNLOADED:s=h._("\u5df2\u7de9\u885d");break;}return s;};q.prototype.downloadControlPlayButtonSubheader=function(r,s){'use strict';var t='';switch(r){case k.NOTDOWNLOADED:t='';break;case k.DOWNLOADED:!(s!=null)?i(0):void 0;t=h._("{size}",[h.param('size',n.getHumanReadbleSize(s.size))]);break;}return t;};q.prototype.downloadControlDownloadButtonHeader=function(r,s,t){'use strict';var u='';if(s===m.SLOW_PLAYBACK||r===k.NOTDOWNLOADED){u=h._("\u7de9\u885d");}else if(r===k.DOWNLOADED)u=h._("\u5df2\u7de9\u885d");return u;};q.prototype.downloadControlDownloadButtonSubheader=function(r,s,t){'use strict';return '';};q.prototype.downloadControlErrorMessage=function(r){'use strict';var s='';if(r===j.ERROR.QUOTA_EXCEEDED){s=h._("\u88dd\u7f6e\u7a7a\u9593\u4e0d\u8db3\uff0c\u7121\u6cd5\u7de9\u885d\u3002");}else s=h._("\u7121\u6cd5\u7de9\u885d\uff0c\u56e0\u70ba\u9023\u7dda\u8a0a\u865f\u4e0d\u4f73\u3002");return s;};q.prototype.downloadControlDownloadInProgressMessage=function(){'use strict';return h._("\u96e2\u958b\u6b64\u9801\u5c07\u53d6\u6d88\u9032\u884c\u4e2d\u7684\u7de9\u885d\u3002");};q.prototype.saveDashboardDownloadActionTitle=function(r){'use strict';return h._("\u7de9\u885d\uff08{size}\uff09",[h.param('size',n.getHumanReadbleSize(r.totalSize))]);};q.prototype.newsFeedChevronActionTitle=function(r,s){'use strict';var t='';switch(r){case k.NOTDOWNLOADED:var u=n.getHumanReadbleSize(s.totalSize);t=h._("\u7de9\u885d\uff08{size}\uff09",[h.param('size',u)]);break;case k.DOWNLOADED:t=h._("\u79fb\u9664\u7de9\u885d\u7684\u5f71\u7247");break;case k.DOWNLOADING:t=h._("\u53d6\u6d88\u7de9\u885d");break;}return t;};f.exports=q;}),null);
__d('MVideoDownloadStringsCollectionDownloadUIv4BlueIcon',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoDownloadStringsCollectionDownloadUIv3','MVideoUtils'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(){'use strict';n.constructor.call(this);}o.prototype.downloadControlDownloadButtonHeader=function(p,q,r){'use strict';var s='';if(q===j.SLOW_PLAYBACK||p===i.NOTDOWNLOADED){s=h._("\u4e0b\u8f09\uff08{size}\uff09",[h.param('size',l.getHumanReadbleSize(r.size))]);}else if(p===i.DOWNLOADED)s=h._("\u5df2\u4e0b\u8f09");return s;};o.prototype.downloadControlDownloadButtonSubheader=function(p,q,r){'use strict';return '';};f.exports=o;}),null);
__d('MVideoDownloadStringsCollectionDownloadUIv4TopRight',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoDownloadStringsCollectionDownloadUIv3','MVideoUtils'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(){'use strict';n.constructor.call(this);}o.prototype.downloadControlDownloadButtonHeader=function(p,q,r){'use strict';var s='';if(q===j.SLOW_PLAYBACK||p===i.NOTDOWNLOADED||p===i.DOWNLOADED)s=h._("{size}",[h.param('size',l.getHumanReadbleSize(r.size))]);return s;};o.prototype.downloadControlDownloadButtonSubheader=function(p,q,r){'use strict';return '';};o.prototype.downloadControlSpinnerText=function(p,q){'use strict';var r='';if(q===j.SLOW_PLAYBACK)r=h._("\u9023\u7dda\u8a0a\u865f\u4e0d\u4f73\uff0c\u8acb\u5617\u8a66\u6539\u70ba\u4e0b\u8f09\u3002");return r;};f.exports=o;}),null);
__d('MVideoDownloadStringsCollectionSaveOffline',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoDownloadStrings','MVideoCache','MVideoUtils','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o,p;if(c.__markCompiled)c.__markCompiled();o=babelHelpers.inherits(q,k);p=o&&o.prototype;function q(){p.constructor.call(this);}q.prototype.downloadControlPlayButtonHeader=function(r){var s='';switch(r){case i.NOTDOWNLOADED:s=h._("\u64ad\u653e");break;case i.DOWNLOADED:s=h._("\u96e2\u7dda\u64ad\u653e");break;}return s;};q.prototype.downloadControlPlayButtonSubheader=function(r,s){var t='';switch(r){case i.NOTDOWNLOADED:t=h._("\u7acb\u5373\u89c0\u770b");break;case i.DOWNLOADED:!(s!=null)?n(0):void 0;t=h._("\u5df2\u5132\u5b58{size}",[h.param('size',m.getHumanReadbleSize(s.size))]);break;}return t;};q.prototype.downloadControlCancelButtonHeader=function(r,s){var t='';switch(r){case i.DOWNLOADING:t=h._("\u6b63\u5728\u5132\u5b58{size}",[h.param('size',m.getHumanReadbleSize(s.total))]);break;}return t;};q.prototype.downloadControlCancelButtonSubheader=function(r,s){var t='';switch(r){case i.DOWNLOADING:var u=m.getDownloadProgressPercentage(s.loaded,s.total);t=h._("{percentage}\u0025",[h.param('percentage',u)]);break;}return t;};q.prototype.downloadControlDownloadButtonHeader=function(r,s,t){var u='';if(s===j.SLOW_PLAYBACK||r===i.NOTDOWNLOADED)u=h._("\u96e2\u7dda\u5132\u5b58");return u;};q.prototype.downloadControlDownloadButtonSubheader=function(r,s,t){var u='';if(s===j.SLOW_PLAYBACK||r===i.NOTDOWNLOADED)u=h._("{size}",[h.param('size',m.getHumanReadbleSize(t.size))]);return u;};q.prototype.downloadControlSpinnerText=function(r,s){var t='';if(s===j.SLOW_PLAYBACK)t=h._("\u9023\u7dda\u4e0d\u4f73\u3002\u7121\u6cd5\u64ad\u653e\u3002");return t;};q.prototype.downloadControlErrorMessage=function(r){var s='';if(r===l.ERROR.QUOTA_EXCEEDED){s=h._("\u88dd\u7f6e\u7a7a\u9593\u4e0d\u8db3\uff0c\u56e0\u6b64\u7121\u6cd5\u96e2\u7dda\u5132\u5b58\u3002");}else s=h._("\u9023\u7dda\u4e0d\u4f73\uff0c\u56e0\u6b64\u7121\u6cd5\u96e2\u7dda\u5132\u5b58\u3002");return s;};q.prototype.downloadControlDownloadInProgressMessage=function(){return h._("\u96e2\u958b\u6b64\u9801\u9762\u5c07\u53d6\u6d88\u5f71\u7247\u4e0b\u8f09\u5230 Facebook \u7684\u7a0b\u5e8f\u3002");};q.prototype.saveDashboardDownloadActionTitle=function(r){return h._("\u96e2\u7dda\u5132\u5b58\uff08{size}\uff09",[h.param('size',m.getHumanReadbleSize(r.totalSize))]);};q.prototype.newsFeedChevronActionTitle=function(r,s){var t='';switch(r){case i.NOTDOWNLOADED:var u=m.getHumanReadbleSize(s.totalSize);t=h._("\u96e2\u7dda\u5132\u5b58\u5f71\u7247\uff08{size}\uff09",[h.param('size',u)]);break;case i.DOWNLOADED:t=h._("\u79fb\u9664\u5f71\u7247");break;case i.DOWNLOADING:t=h._("\u53d6\u6d88\u96e2\u7dda\u5132\u5b58\u5f71\u7247");break;}return t;};f.exports=q;}),null);
__d('MVideoDownloadStringsCollectionSaveOfflineUIv3',['fbt','MVideoDownloadState','MVideoPlaybackState','MVideoCache','MVideoDownloadStrings','MVideoUtils','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(c.__markCompiled)c.__markCompiled();var q=' \u00B7 ';o=babelHelpers.inherits(r,l);p=o&&o.prototype;function r(){'use strict';p.constructor.call(this);}r.prototype.downloadControlPlayButtonHeader=function(s){'use strict';var t='';switch(s){case i.NOTDOWNLOADED:t='';break;case i.DOWNLOADED:t=h._("\u96e2\u7dda\u5132\u5b58");break;}return t;};r.prototype.downloadControlPlayButtonSubheader=function(s,t){'use strict';var u='';switch(s){case i.NOTDOWNLOADED:u='';break;case i.DOWNLOADED:!(t!=null)?n(0):void 0;u=h._("{size}",[h.param('size',m.getHumanReadbleSize(t.size))]);break;}return u;};r.prototype.downloadControlCancelButtonHeader=function(s,t){'use strict';var u='';switch(s){case i.DOWNLOADING:var v=m.getDownloadProgressPercentage(t.loaded,t.total);u=h._("\u5132\u5b58\u9032\u5ea6{separator}{percentage}\u0025",[h.param('separator',q),h.param('percentage',v)]);break;}return u;};r.prototype.downloadControlCancelButtonSubheader=function(s,t){'use strict';var u='';switch(s){case i.DOWNLOADING:u=h._("{size}",[h.param('size',m.getHumanReadbleSize(t.total))]);break;}return u;};r.prototype.downloadControlDownloadButtonHeader=function(s,t,u){'use strict';var v='';if(t===j.SLOW_PLAYBACK||s===i.NOTDOWNLOADED){v=h._("\u96e2\u7dda\u5132\u5b58");}else if(s===i.DOWNLOADED)v=h._("\u5df2\u96e2\u7dda\u5132\u5b58");return v;};r.prototype.downloadControlDownloadButtonSubheader=function(s,t,u){'use strict';var v='';if(t===j.SLOW_PLAYBACK||s===i.NOTDOWNLOADED||s===i.DOWNLOADED)v=h._("{size}",[h.param('size',m.getHumanReadbleSize(u.size))]);return v;};r.prototype.downloadControlSpinnerText=function(s,t){'use strict';var u='';if(t===j.SLOW_PLAYBACK)u=h._("\u9023\u7dda\u4e0d\u4f73\u3002\u7121\u6cd5\u64ad\u653e\u3002");return u;};r.prototype.downloadControlErrorMessage=function(s){'use strict';var t='';if(s===k.ERROR.QUOTA_EXCEEDED){t=h._("\u88dd\u7f6e\u7a7a\u9593\u4e0d\u8db3\uff0c\u7121\u6cd5\u96e2\u7dda\u5132\u5b58\u3002");}else t=h._("\u9023\u7dda\u4e0d\u4f73\uff0c\u7121\u6cd5\u4e0b\u8f09\u3002");return t;};r.prototype.downloadControlDownloadInProgressMessage=function(){'use strict';return h._("\u96e2\u958b\u6b64\u9801\u9762\u5c07\u53d6\u6d88\u76ee\u524d\u7684\u4e0b\u8f09\u4f5c\u696d\u3002");};r.prototype.saveDashboardDownloadActionTitle=function(s){'use strict';return h._("\u96e2\u7dda\u5132\u5b58\uff08{size}\uff09",[h.param('size',m.getHumanReadbleSize(s.totalSize))]);};r.prototype.newsFeedChevronActionTitle=function(s,t){'use strict';var u='';switch(s){case i.NOTDOWNLOADED:var v=m.getHumanReadbleSize(t.totalSize);u=h._("\u96e2\u7dda\u5132\u5b58\u5f71\u7247\uff08{size}\uff09",[h.param('size',v)]);break;case i.DOWNLOADED:u=h._("\u79fb\u9664\u5f71\u7247");break;case i.DOWNLOADING:u=h._("\u53d6\u6d88\u96e2\u7dda\u5132\u5b58\u5f71\u7247");break;}return u;};f.exports=r;}),null);
__d('MVideoDownloadStringsCollectionVideosTab',['fbt','MVideoDownloadStringsCollectionDownloadUIv3','MVideoUtils'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(){'use strict';l.constructor.call(this);}m.prototype.videosTabRemoveVideoDownloadSubtitle=function(n){'use strict';return h._("\u91cb\u653e{size}",[h.param('size',j.getHumanReadbleSize(n.totalSize))]);};f.exports=m;}),null);
__d('MVideoDownloadStringsFactory',['MVideoDownloadStrings','MVideoDownloadStringsCollectionSaveOffline','MVideoDownloadStringsCollectionDownloadToFacebook','MVideoDownloadStringsCollectionDownloadToFacebookUIOnlyIcon','MVideoDownloadStringsCollectionDownloadToFacebookUIv3','MVideoDownloadStringsCollectionDownloadUIv3DsHidden','MVideoDownloadStringsCollectionDownloadUIv3DsHiddenAutoBuffering','MVideoDownloadStringsCollectionDownloadUIv3','MVideoDownloadStringsCollectionSaveOfflineUIv3','MVideoDownloadStringsCollectionVideosTab','MVideoDownloadStringsCollectionDownloadToFacebookUIv3QualitySelector','MVideoDownloadStringsCollectionDownloadUIv4TopRight','MVideoDownloadStringsCollectionDownloadUIv4BlueIcon','MVideoDownloadConfig','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w={SAVE_OFFLINE:'save_offline',DOWNLOAD_TO_FACEBOOK:'download_to_facebook',DOWNLOAD_TO_FACEBOOK_UI_ONLY_ICON:'download_to_facebook_ui_only_icon',DOWNLOAD_TO_FACEBOOK_UI_V3:'download_to_facebook_ui_v3',DOWNLOAD_UI_V3_DS_HIDDEN:'download_ui_v3_ds_hidden',DOWNLOAD_UI_V3_DS_HIDDEN_AUTO_BUFFERING:'download_ui_v3_ds_hidden_auto_buffering',DOWNLOAD_UI_V3:'download_ui_v3',SAVE_OFFLINE_UI_V3:'save_offline_ui_v3',VIDEOS_TAB:'videos_tab',DOWNLOAD_TO_FACEBOOK_UI_V3_QUALITY_SELECTOR:'download_to_facebook_ui_v3_quality_selector',DOWNLOAD_UI_V4_TOP_RIGHT:'download_ui_v4_top_right',DOWNLOAD_UI_V4_BLUE_ICON:'download_ui_v4_blue_icon'},x={getStrings:function y(){var z=null,aa=u.strings_collection;if(aa==w.SAVE_OFFLINE){z=new i();}else if(aa==w.DOWNLOAD_TO_FACEBOOK_UI_ONLY_ICON){z=new k();}else if(aa==w.DOWNLOAD_TO_FACEBOOK_UI_V3){z=new l();}else if(aa==w.DOWNLOAD_UI_V3_DS_HIDDEN){z=new m();}else if(aa==w.DOWNLOAD_UI_V3_DS_HIDDEN_AUTO_BUFFERING){z=new n();}else if(aa==w.DOWNLOAD_UI_V3){z=new o();}else if(aa==w.SAVE_OFFLINE_UI_V3){z=new p();}else if(aa==w.VIDEOS_TAB){z=new q();}else if(aa==w.DOWNLOAD_TO_FACEBOOK_UI_V3_QUALITY_SELECTOR){z=new r();}else if(aa==w.DOWNLOAD_UI_V4_TOP_RIGHT){z=new s();}else if(aa==w.DOWNLOAD_UI_V4_BLUE_ICON){z=new t();}else{!(aa==w.DOWNLOAD_TO_FACEBOOK)?v(0):void 0;z=new j();}return z;}};f.exports=x;}),null);
__d('MVideoDownloadDialogs',['MCustomDialog','MVideoDownloadStringsFactory'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={showUnavailableDialog:function k(){var l=i.getStrings();h({titleString:l.downloadDialogUnavailableTitle(),descriptionString:l.downloadDialogUnavailableDescription(),dismissButtonString:l.downloadDialogUnavailableDismissButton()});},showSurveyDialog:function k(l,m){var n=i.getStrings();h({titleString:n.downloadSurveyDialogTitle(),descriptionString:n.downloadSurveyDialogDescription(),dismissButtonString:n.downloadSurveyDialogDismissButton(),dismissButtonCallback:m,confirmButtonString:n.downloadSurveyDialogConfirmButton(),confirmButtonCallback:l});}};f.exports=j;}),null);
__d("MVideoMediaSourceState",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){"use strict";this.$MVideoMediaSourceState2=false;this.$MVideoMediaSourceState1=false;this.$MVideoMediaSourceState3=i;}h.prototype.getMediaSource=function(){"use strict";return this.$MVideoMediaSourceState3;};h.prototype.videoStreamEnded=function(){"use strict";this.$MVideoMediaSourceState2=true;this.$MVideoMediaSourceState4();};h.prototype.audioStreamEnded=function(){"use strict";this.$MVideoMediaSourceState1=true;this.$MVideoMediaSourceState4();};h.prototype.$MVideoMediaSourceState4=function(){"use strict";if(this.$MVideoMediaSourceState1&&this.$MVideoMediaSourceState2)this.$MVideoMediaSourceState3.endOfStream();};f.exports=h;}),null);
__d('MInlineVideo',['Bootloader','CSS','MLegacyDataStore','DOM','MInlineVideoUnit','MStopNGo','MVideoExperiments','MVideoUtils','MViewport','Stratcom','SubscriptionsHandler','VideoPlayerReason','MVideoCache','MVideoCacheCleanUp','MVideoDownloadConfig','MVideoDownloadDialogs','MVideoMediaSourceState','MFullScreen','emptyFunction','isNodeWithinRect'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba,ca,da,ea=false,fa=false,ga=s.USER,ha=o.PLAYER_STATE.paused,ia=null,ja=false,ka,la=null,ma,na=false,oa,pa=null,qa=false,ra=null,sa={playRequest:Function,registerPlayRequest:function yb(zb){this.playRequest=zb;},onComponentReady:function yb(){if(oa&&pa&&this.playRequest)this.playRequest();}};function ta(yb){ja=yb;if(fa)return;q.listen('click',o.PLAY_SIGIL,jb);q.listen('m:page:unload',null,ya);q.listen(['m:jewel:flyout:open','m:popup:show','m:side-area:show'],null,za);fa=true;}function ua(){if(ba&&ba.getAttribute('playInFullScreen')==='true'&&!y.isFullScreen()&&!ea){ya();y.removeFullScreenEventListeners(window,ua);}}function va(yb){if(ja)q.invoke('m:video:player:fullscreenchange',null,{videoElement:yb,player:ba});}function wa(yb){if(!yb)yb=ca;return ba&&ba.parentNode===yb&&!ea;}function xa(){var yb=j.get(da);ra=yb.defaultQuality;var zb=yb.effectiveSrc,ac=yb.type;if(Array.isArray(zb)&&(ac!=='video'||zb.length===1))zb=zb[0];if(ac==='video'&&Array.isArray(zb)){zb.forEach(function(bc){ba.appendChild(k.create('source',bc));});}else if(zb)ba.setAttribute('src',zb);if(ac==='video')ba.load();}function ya(){var yb=null;if(!ba||!ba.parentNode)return;if(pa){pa.unload();pa=null;}if(ja)rb(da,true);if(oa){oa.unload();oa=null;}k.remove(ba);while(ba.hasChildNodes())ba.removeChild(ba.lastChild);ba.removeAttribute('src');if(j.get(da).type==='video'&&ba){ba.pause();if(ja)q.invoke('m:video:player:destroy',null,{videoElement:da,player:ba});yb=ba;ba=null;}i.conditionClass(da,o.SHOWN_CLASS,false);ea=false;da=null;ca=null;if(ma){na=false;ma&&ma.release();ma=null;}if(ka){ka.release();ka=null;}if(n.enablePlayerStateCleanup&&yb){yb.setAttribute('src','');yb.load&&yb.load();}yb=null;}function za(){if(!wa())return;if(j.get(da).type!=='video'){ya();}else if(ba){ba.pause();i.conditionClass(da,o.SHOWN_CLASS,false);ea=true;}}function ab(){return ga;}function bb(){var yb=j.get(da),zb=yb.type,ac=document.getElementById(o.PLAYER_ID[zb]),bc=n.enableSphericalVideo&&yb.spherical;if(!ac)ac=o.createNodeFromTag(zb,bc);return ac;}function cb(yb){var zb=o.PLAYER_STATE.paused;if(!yb||yb===da)zb=ha;return zb;}function db(){return da;}function eb(yb){if(!ba||!ba.parentNode)return;ga=yb;ha=o.PLAYER_STATE.paused;ba.pause();}function fb(yb){if(!ba||!ba.parentNode)return;ga=yb;ha=o.PLAYER_STATE.playing;o.play(ba);}function gb(yb){ga=yb;}function hb(yb,zb){var ac=null,bc=null;if(zb.videoCodec){ac=yb.getMediaSource().addSourceBuffer('video/mp4; codecs="'+zb.videoCodec+'"');ac.addEventListener('updateend',function(){yb.videoStreamEnded();},false);}else yb.videoStreamEnded();if(zb.audioCodec){bc=yb.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+zb.audioCodec+'"');bc.addEventListener('updateend',function(){yb.audioStreamEnded();},false);}else yb.audioStreamEnded();if(zb.videoCodec)t.getCachedVideoStream(zb,function(cc){var dc=new FileReader();dc.addEventListener('loadend',function(){ac.appendBuffer(dc.result);});dc.readAsArrayBuffer(cc);},z);if(zb.audioCodec)t.getCachedAudioStream(zb,function(cc){var dc=new FileReader();dc.addEventListener('loadend',function(){bc.appendBuffer(dc.result);});dc.readAsArrayBuffer(cc);},z);}function ib(yb,zb){var ac=null,bc=null,cc=null,dc=null,ec=function fc(gc,hc,ic){hc.getNextBuffer(function(jc){if(jc){var kc=new FileReader();kc.addEventListener('loadend',function(){gc.appendBuffer(kc.result);});kc.readAsArrayBuffer(jc);}else ic();});};if(zb.videoCodec){cc=t.getCachedVideoStreamObject(zb);ac=yb.getMediaSource().addSourceBuffer('video/mp4; codecs="'+zb.videoCodec+'"');ac.addEventListener('updateend',function(){ec(ac,cc,function(){yb.videoStreamEnded();});},false);}else yb.videoStreamEnded();if(zb.audioCodec){dc=t.getCachedAudioStreamObject(zb);bc=yb.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+zb.audioCodec+'"');bc.addEventListener('updateend',function(){ec(bc,dc,function(){yb.audioStreamEnded();});},false);}else yb.audioStreamEnded();if(zb.videoCodec)ec(ac,cc,function(){yb.videoStreamEnded();});if(zb.audioCodec)ec(bc,dc,function(){yb.audioStreamEnded();});}function jb(yb,zb,ac,bc){if(!zb)zb=yb.getNode(o.INSERTION_POINT_SIGIL);bc=bc||s.USER;var cc=j.get(zb),dc=t.isVideoDownloading(cc.videoID);if(dc)return;if(wa(zb))return;if(yb)yb.prevent();cc.effectiveSrc=cc.src;var ec=t.isSupported()&&cc.canUseOffline&&t.getCachedVideoByID(cc.videoID);if(ec){var fc=ec&&u.checkAccess(ec);t.logPlaybackRequest(cc.videoID,fc,bc);if(!fc){w.showUnavailableDialog();return;}else{var gc=new x(new MediaSource());gc.getMediaSource().addEventListener('sourceopen',function(){if(v.cache_chunked_playback_enabled){ib(gc,ec);}else hb(gc,ec);},false);cc.effectiveSrc=window.URL.createObjectURL(gc.getMediaSource());}}cc.muted=!!ac;kb(yb,zb,cc,bc);}function kb(yb,zb,ac,bc){var cc;if(!ea){if(ja)q.invoke('m:video:player:prepare',null,{videoElement:zb,player:ba});ya();da=zb;ba=bb();if(ac.spherical)ba.setAttribute('crossorigin','anonymous');if(ia){ia.release();ia=null;}if(ac.videoID)ia=new l(ac,ba,null,bc);ba.setAttribute('playInFullScreen',ac.playInFullScreen);if(ac.muted)ba.setAttribute('muted',true);xa();k.prependContent(da,ba);}i.conditionClass(da,o.SHOWN_CLASS,true);ea=false;qa=ac.spherical;o.setVideoDimensions(ac,ba);o.setSubtitles(ac,ba);if(ac.playOnClick&&ac.type==='video'){if(ac.spherical){sa.registerPlayRequest(function(){return fb(bc);});}else fb(bc);if(ac.playInFullScreen&&y.isSupported()){y.listenForFullScreenEvent(window,ua);y.enableFullScreen(ba);}}i.conditionClass(da,o.LOADING_CLASS,true);i.conditionClass(da,o.SPHERICAL_CLASS,qa);lb(da,ac);if(!oa&&n.enableSphericalVideo&&qa)(function(){var dc={toggleQuality:ob,getCurrentVideoQuality:function ec(){return ra;}};h.loadModules(["MEmbeddedVideoControls"],function(ec){oa=new ec(ba,da,dc);sa.onComponentReady();},'MInlineVideo');})();if(yb)o.handleLoggingOnPlay(yb,ia,ac);}function lb(yb,zb){if(!ka)ka=new r();if(!ma)ma=new r();ka.addSubscriptions(k.listen(ba,'pause',null,function(){return rb(yb);}),k.listen(ba,'play',null,function(){return qb(yb);}));if(qa&&n.enableSphericalVideo)ka.addSubscriptions(k.listen(ba,'loadedmetadata',null,function(){return nb(zb);}));if(ja){ka.addSubscriptions(k.listen(ba,'playing',null,function(){return sb(yb);}));ka.addSubscriptions(k.listen(ba,'ended',null,function(){return tb(yb);}));ka.addSubscriptions(k.listen(ba,'volumechange',null,function(){return ub(yb);}));if(y.isSupported()){if(la)y.removeFullScreenEventListeners(window,la);la=function ac(){return va(yb);};y.listenForFullScreenEvent(window,la);}}if(yb.readyState>=yb.HAVE_FUTURE_DATA){vb();}else ka.addSubscriptions(k.listen(ba,'canplay',null,vb));if(zb.animatedGifVideo)if(!na){ba.setAttribute('loop',true);na=true;ma.addSubscriptions(m.listen('go',xb));}}function mb(event,yb){if(ia){var zb={video_quality:ra};Object.assign(yb,zb);ia.logEvent(event,yb);}}function nb(yb){if(!qa||pa)return;qa=false;var zb=yb.sphericalParams,ac={projectionType:zb.projection,initialHeading:zb.initialYaw,initialPitch:zb.initialPitch,fieldOfView:zb.initialFieldOfView,expansionCoef:1.01},bc={disableTouchControls:zb.disableSphericalTouchControls},cc={videoID:yb.videoID,logEvent:mb,viewportConfig:bc};h.loadModules(["MVideoPlayerHTML5Spherical"],function(dc){pa=new dc(ba,ac,cc);sa.onComponentReady();},'MInlineVideo');}function ob(){var yb=j.get(da),zb=t.isSupported()&&t.getCachedVideoByID(yb.videoID);if(zb)return;var ac=yb.availableQualities;if(!ac)return;var bc;for(var cc in ac)if(ac.hasOwnProperty(cc)&&cc!==ra){bc=cc;break;}if(!bc)return;ra=bc;pb(ac[bc]);}function pb(yb){if(ba.tagName!=='VIDEO')return;ba.pause();var zb=ba.currentTime;ba.setAttribute('src',yb);ba.currentTime=zb;ba.load();ba.play();}function qb(yb){if(ja)q.invoke('m:video:player:play',null,{videoElement:yb,player:ba});ha=o.PLAYER_STATE.playing;i.conditionClass(da,o.SHOW_PAUSE_CLASS,false);}function rb(yb,zb){if(ja)q.invoke('m:video:player:pause',null,{videoElement:yb,player:ba,destroyed:zb});ha=o.PLAYER_STATE.paused;i.conditionClass(da,o.SHOW_PAUSE_CLASS,true);vb();}function sb(yb){if(ja)q.invoke('m:video:player:playing',null,{videoElement:yb,player:ba});}function tb(yb){if(ja)q.invoke('m:video:player:ended',null,{videoElement:yb,player:ba});}function ub(yb){if(ja)q.invoke('m:video:player:volumechange',null,{videoElement:yb,player:ba});}function vb(){i.conditionClass(da,o.LOADING_CLASS,false);}function wb(){var yb=p.getHeight(),zb=p.getWidth(),ac=p.getBoundingRect();return {bottom:yb,height:yb,left:ac.left,top:0,right:ac.left+zb,width:zb};}function xb(){var yb=wb(),zb=aa(da,yb);if(zb&&!na&&ha==o.PLAYER_STATE.paused){ba.play();ha=o.PLAYER_STATE.playing;ba.setAttribute('loop',true);na=true;}else if(!zb&&na&&ha==o.PLAYER_STATE.playing){ba.pause();ha=o.PLAYER_STATE.paused;ba.setAttribute('loop',false);na=false;}}g.getLastActionReason=ab;g.getPlayerState=cb;g.getPlayerDOMVideoElement=db;g.pause=eb;g.play=fb;g.removePlayer=ya;g.setLastActionReason=gb;g.setupListeners=ta;g.showPlayer=jb;}),null);
__d("HTMLMediaElementReadyStates",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};f.exports=h;}),null);
__d('getHTMLMediaElementMutedState',['HTMLMediaElementReadyStates'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){if(j.readyState>=h.HAVE_METADATA){return j.muted;}else return j.hasAttribute('muted')||j.muted;}f.exports=i;}),null);
__d('HVideoPlayerMixin',['EventListener','UserAgent','VideoPlayerLoggerEvent','VideoPlayerHTML5Experiments','getHTMLMediaElementMutedState'],(function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=-1;function n(p,event){var q=event.timeStamp;if(q){var r=q.toString().length-Date.now().toString().length;if(r!==0)q=Math.round(q/Math.pow(10,r));p.time_ms=q;}else p.time_ms=Date.now();return p;}var o={initLogger:function p(q,r){this._loggedEvents={};this._logFunction=q;this._useEventTime=r;var s=this.getVideoElement();this._lastStartTimePosition=m;this._muted=l(s);this._pausedPosition=m;this._seeking=false;this._seekSourceTimePosition=m;this._volume=s.volume;this._lastPlayedTime=m;var t=false;if(s.readyState>=s.HAVE_FUTURE_DATA){this._logReadyToPlay();}else t=true;if(this.skipSubscriptions())return;var u=this.getSubscriptions();if(t)u.addSubscriptions(h.listen(s,'canplay',this._logReadyToPlay.bind(this)));u.addSubscriptions(h.listen(s,'ended',this.onEnded.bind(this)),h.listen(s,'pause',this.onPause.bind(this)),h.listen(s,'playing',this.onPlaying.bind(this)),h.listen(s,'seeked',this.onSeeked.bind(this)),h.listen(s,'seeking',this.onSeeking.bind(this)),h.listen(s,'play',this.onPlay.bind(this)),h.listen(s,'loadedmetadata',this.onLoadedMetadata.bind(this)),h.listen(s,'timeupdate',this.onTimeUpdate.bind(this)),h.listen(s,'volumechange',this.onVolumeChange.bind(this)),h.listen(s,'representationended',this.onRepresentationEnded.bind(this)));},skipSubscriptions:function p(){return false;},onCanPlay:function p(q){this._logReadyToPlay(q);},onPlay:function p(q){this._ignoreNextPlaying=false;this._pendingPlayRequest=true;},_logOnce:function p(event,q){if(this._loggedEvents[event])return;this._logEvent(event,q);},_logEvent:function p(event,q){this._loggedEvents[event]=true;var r=q?q:{};r.video_id=this.getVideoID();if(!r.hasOwnProperty('video_time_position'))r.video_time_position=this._getVideoCurrentTime();if(!r.time_ms)r.time_ms=Date.now();r.time=Math.round(r.time_ms/1000);if(this.getAdClientToken){var s=this.getAdClientToken();if(s)r.ad_client_token=s;}if(this.getPlayerFormat)r.player_format=this.getPlayerFormat();if(this.getPlayerOrigin)r.player_origin=this.getPlayerOrigin();if(this.getPlayerSuborigin)r.player_suborigin=this.getPlayerSuborigin();this._logFunction(event,r);},_logReadyToPlay:function p(){this._logOnce(j.READY_TO_PLAY);},onPause:function p(q){var r=this.getVideoElement();if(this._pendingPlayRequest){var s={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=false;this._logEvent(j.CANCELLED_REQUESTED_PLAYING,s);return;}var event=r.ended?j.FINISHED_PLAYING:j.PAUSED,t=this._getVideoCurrentTime();if(t)this._lastPlayedTime=t;var u=this._lastPlayedTime,v=q.lastPauseReason;if(event===j.FINISHED_PLAYING){u=Math.max(u,r.duration);}else if(this.preventPauseLoggingInMixin===true){return;}else if(this.preventPauseLoggingInMixin===false)v=v||'unloaded';this._logEvent(event,this._amendEventTime({video_last_start_time_position:this._lastStartTimePosition===m?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:u,debug_reason:v},q));this._lastStartTimePosition=m;},onEnded:function p(){if(this._lastStartTimePosition!==m&&i.isBrowser('IE'))this.onPause({});},onRepresentationEnded:function p(q){var r=q.detail;if(r){var s={representation_id:r.representationID,next_representation_id:r.nextRepresentationID,stream_switch_reason:r.streamSwitchReason};if(k.newStateChangeCalculation){var t=this.getVideoElement();this._lastPlayedTime=this._getVideoCurrentTime();var u=this._lastPlayedTime;s=this._amendEventTime(babelHelpers['extends']({video_last_start_time_position:this._lastStartTimePosition===m?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:u},s),q);}this._logEvent(j.REPRESENTATION_ENDED,s);if(k.newStateChangeCalculation){var v=this._getVideoCurrentTime();this._lastStartTimePosition=v;this._lastPlayedTime=v;}}},addWatchTimeData:function p(q){if(this._lastStartTimePosition!=m&&this._lastPlayedTime!=m){q.video_last_start_time_position=this._lastStartTimePosition;q.video_time_position=this._lastPlayedTime;this._lastStartTimePosition=m;}return q;},getLastPlayReason:function p(){return null;},getVideoPlayReason:function p(){return null;},onPlaying:function p(q){if(this._ignoreNextPlaying){this._ignoreNextPlaying=false;return;}var r=this.getLastPlayReason();this._pendingPlayRequest=false;var event=this._loggedEvents[j.STARTED_PLAYING]?j.UNPAUSED:j.STARTED_PLAYING,s=this._amendEventTime({debug_reason:r,video_play_reason:this.getVideoPlayReason()},q),t=this._getVideoCurrentTime();if(k.useCurrentTimeAdjustment){var u=this.getVideoElement().currentTime,v=u-t;s.time_ms-=Math.round(v*1000);}this._logEvent(event,s);this._lastStartTimePosition=t;this._lastPlayedTime=t;this._currentTimeAtLoadedMetadataCache=null;},allowNextSeekInMixin:function p(){this._allowNextSeek=true;},onSeeked:function p(q){this._seeking=false;var r=this._seekSourceTimePosition;this._seekSourceTimePosition=m;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){if(!this._pendingPlayRequest)this._ignoreNextPlaying=true;return;}this._allowNextSeek=false;this._ignoreNextPlaying=false;var s={video_seek_source_time_position:r};if(this._lastStartTimePosition!==m){s.video_last_start_time_position=this._lastStartTimePosition;}else s.video_last_start_time_position=r;this._logEvent(j.SCRUBBED,this._amendEventTime(s,q));var t=this.getVideoElement();if(t.paused){this._lastStartTimePosition=m;}else this._lastStartTimePosition=this._getVideoCurrentTime();},onSeeking:function p(q){this._currentTimeAtLoadedMetadataCache=null;if(!this._seeking){this._seekSourceTimePosition=this._getVideoCurrentTime();this._seeking=true;}},onTimeUpdate:function p(q){this._currentTimeAtLoadedMetadataCache=null;var r=this.getVideoElement();if(!r.paused)this._lastPlayedTime=this._getVideoCurrentTime();},onVolumeChange:function p(q){var r=this.getVideoElement(),s={},event=null;if(k.useFixedVolumeLogging){var t=r.muted,u=this._muted,v=r.volume,w=this._volume;s.current_volume=Math.round(v*100);this._volume=v;this._muted=t;var x=t||v==0,y=u||w==0;if(y&&x)return;if(y!=x){if(x){event=j.MUTED;}else event=j.UNMUTED;}else{if(w==v)return;if(v<w){event=j.VOLUME_DECREASE;}else event=j.VOLUME_INCREASE;}}else{if(r.muted!==this._muted&&r.volume===this._volume&&r.volume>0){event=r.muted?j.MUTED:j.UNMUTED;}else{event=r.volume>this._volume?j.VOLUME_INCREASE:j.VOLUME_DECREASE;s.current_volume=Math.round(r.volume*100);}this._muted=r.muted;this._volume=r.volume;}this._logEvent(event,this._amendEventTime(s,q));},_amendEventTime:function p(q,event){if(this._useEventTime){return n(q,event);}else q.time_ms=Date.now();return q;},_getVideoCurrentTime:function p(){if(k.useCurrentTimeAdjustment)if(this._currentTimeAtLoadedMetadataCache!=null)return this._currentTimeAtLoadedMetadataCache.toFixed(2);return this.getVideoElement().currentTime.toFixed(2);},onLoadedMetadata:function p(q){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime;}};f.exports=o;}),null);
__d('VideoPlayerLoggerErrorStates',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={PLAYBACK_FAILURE:'playback_failure',PLAYER_FAILURE:'player_failure'};}),null);
__d('VideoPlayerLoggerErrors',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={ENTERED_FALLBACK:'entered_fallback',ERROR_CALLING_FLASH:'error_calling_flash'};}),null);
__d('VideoPlayerLoggerFallbackReasons',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={TIMEOUT:'timeout',FLASH_ERROR:'flash_error',FLASH_UNAVAILABLE:'flash_unavailable'};}),null);
__d('VideoPlayerLoggerPlayerStates',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={STARTED:'started',UNPAUSED:'unpaused'};}),null);
__d('VideoPlayerLogger',['Banzai','ErrorUtils','TimeSpentImmediateActiveSecondsLogger','VideoPlayerHTML5Experiments','VideoPlayerLoggerEvent','VideoPlayerLoggerErrors','VideoPlayerLoggerErrorStates','VideoPlayerLoggerFallbackReasons','VideoPlayerLoggerSource','VideoPlayerInitializationEvent','VideoPlayerLoggerPlayerStates','ex','performanceAbsoluteNow'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=k.useBanzaiVitalForLive,v='video_player',w=5000,x=function z(){return k.useMonotonicallyIncreasingTimers?t():Date.now();};function y(z,aa){this.$VideoPlayerLogger2=z;this.$VideoPlayerLogger3=null;this.$VideoPlayerLogger6={};this.$VideoPlayerLogger4=aa;this.$VideoPlayerLogger8=0;this.$VideoPlayerLogger9=0;this.$VideoPlayerLogger7=[];this.$VideoPlayerLogger15();}y.prototype.updateSource=function(z){this.$VideoPlayerLogger2=z;};y.prototype.getSource=function(){return this.$VideoPlayerLogger2;};y.prototype.logEvent=function(event,z){z=babelHelpers['extends']({},z,this.$VideoPlayerLogger4);z.initial_event=!this.$VideoPlayerLogger6.hasOwnProperty(event);if(!z.hasOwnProperty('time_ms'))z.time_ms=x();if(!z.hasOwnProperty('time'))z.time=Math.round(z.time_ms/1000);z.is_stalling=this.$VideoPlayerLogger16();z.error_user_info=this.$VideoPlayerLogger17(z.error_user_info);if(this.$VideoPlayerLogger3)Object.assign(z,this.$VideoPlayerLogger3);switch(event){case q.PLAYER_INITIALIZATION:this.$VideoPlayerLogger5=z.time_ms;break;case q.REQUESTED_PLAYING:case q.STARTED_PLAYING:case q.PLAYER_ALLOCATED:case q.PLAYER_SENT_REQUEST:case q.PLAYER_RECEIVED_FIRST_BYTE:case q.BUFFER_READY:case q.METADATA_READY:if(!z.initial_event)break;z.elapsed_time_since_init=Date.now()-this.$VideoPlayerLogger5;break;}switch(event){case l.REQUESTED_PLAYING:this.$VideoPlayerLogger15();this.$VideoPlayerLogger18();if(this.$VideoPlayerLogger6[l.STARTED_PLAYING]){z.state=r.UNPAUSED;}else z.state=r.STARTED;break;case l.STARTED_PLAYING:case l.UNPAUSED:case l.FINISHED_PLAYING:case l.CANCELLED_REQUESTED_PLAYING:case l.ERROR:case l.PAUSED:if(event===l.STARTED_PLAYING||event===l.UNPAUSED)this.$VideoPlayerLogger7=[];if(event===l.ERROR&&z.state!==n.PLAYBACK_FAILURE)break;if(event===l.CANCELLED_REQUESTED_PLAYING)if(this.$VideoPlayerLogger6[l.STARTED_PLAYING]){z.state=r.UNPAUSED;}else z.state=r.STARTED;this.$VideoPlayerLogger19();if(event===l.PAUSED||event===l.FINISHED_PLAYING)z.recent_stalls_count=this.$VideoPlayerLogger20();this.$VideoPlayerLogger21();this.$VideoPlayerLogger22(z);this.$VideoPlayerLogger15();break;}var aa={logData:z,event:event,scriptPath:this.$VideoPlayerLogger1,source:this.$VideoPlayerLogger2};if(!event)i.reportError(new Error(s('VideoPlayerLogger: Missing event name')),false);this.$VideoPlayerLogger6[event]=true;if(this.$VideoPlayerLogger2===p.ANIMATED_IMAGE_SHARE)return null;if(z.ad_client_token||u&&z.playback_is_live_streaming){h.post(v,aa,h.VITAL);}else h.post(v,aa);if(event===l.FINISHED_PLAYING||event===l.PAUSED){var ba=z.time_ms||x(),ca=z.video_time_position-z.video_last_start_time_position;if(ca>=0)j.maybeReportActiveInterval('video',ba-Math.floor(ca*1000),ba);}return aa;};y.prototype.setScriptPath=function(z){this.$VideoPlayerLogger1=z;};y.prototype.setFTData=function(z){this.$VideoPlayerLogger3=z;};y.prototype.startBuffering=function(z){this.$VideoPlayerLogger18(z);};y.prototype.endBuffering=function(){this.$VideoPlayerLogger19();this.$VideoPlayerLogger21();};y.prototype.$VideoPlayerLogger16=function(){return this.$VideoPlayerLogger12>0;};y.prototype.$VideoPlayerLogger18=function(z){if(this.$VideoPlayerLogger16())return;this.$VideoPlayerLogger12=Date.now();if(z!==undefined&&this.$VideoPlayerLogger6[l.STARTED_PLAYING])this.$VideoPlayerLogger13=z;};y.prototype.$VideoPlayerLogger23=function(){return this.$VideoPlayerLogger16()?Date.now()-this.$VideoPlayerLogger12:0;};y.prototype.$VideoPlayerLogger19=function(){if(this.$VideoPlayerLogger16()){var z=this.$VideoPlayerLogger23();if(this.$VideoPlayerLogger13!==null)this.$VideoPlayerLogger14=z;this.$VideoPlayerLogger11+=z;this.$VideoPlayerLogger9+=z;this.$VideoPlayerLogger10++;this.$VideoPlayerLogger8++;}};y.prototype.$VideoPlayerLogger21=function(){if(this.$VideoPlayerLogger16())this.$VideoPlayerLogger12=0;};y.prototype.$VideoPlayerLogger17=function(z){if(z&&typeof z=='object')return JSON.stringify(z);return z;};y.prototype.getCumulativeStallCount=function(){return this.$VideoPlayerLogger8;};y.prototype.getCumulativeStallTime=function(){return this.$VideoPlayerLogger9+this.$VideoPlayerLogger23();};y.prototype.$VideoPlayerLogger22=function(z){z.stall_time=Math.max(0,this.$VideoPlayerLogger11);z.stall_count=this.$VideoPlayerLogger10;if(this.$VideoPlayerLogger14){z.first_stall_time=this.$VideoPlayerLogger14;z.first_stall_start_position=this.$VideoPlayerLogger13;}};y.prototype.$VideoPlayerLogger20=function(){var z=x(),aa=z-w;this.$VideoPlayerLogger7=this.$VideoPlayerLogger7.filter(function(ba){return ba>=aa;});if(this.$VideoPlayerLogger10>0)this.$VideoPlayerLogger7.push(z);return this.$VideoPlayerLogger7.length;};y.prototype.$VideoPlayerLogger15=function(){this.$VideoPlayerLogger11=0;this.$VideoPlayerLogger12=0;this.$VideoPlayerLogger10=0;this.$VideoPlayerLogger13=null;this.$VideoPlayerLogger14=0;};y.Sources=p;y.Errors=m;y.FallbackReasons=o;y.ErrorStates=n;y.PlayerStates=r;f.exports=y;}),null);
__d('HVideoPlayerLoggerMixin',['HVideoPlayerMixin','EventListener','VideoPlayerLogger','VideoPlayerLoggerEvent','VideoPlayerVersions'],(function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={},n={initLogger:function o(){i.listen(this.getVideoElement(),'play',function(){return this._onPlayLogUnmute();}.bind(this));this._logger=new j(j.Sources.HTML5);var p=function(event,q){var r=this.getSavedOffline(),s=this.getConnectivityType();q=babelHelpers['extends']({},q,{player_version:l.HTML5,saved_offline:r,connectivity_type:s});if(event===k.UNMUTED)this._unmutedWasLogged=true;this._logger.logEvent(event,q);}.bind(this);h.initLogger.call(this,p);},_onPlayLogUnmute:function o(){var p=this.getLastPlayReason();if(!this._unmutedWasLogged&&!this.getVideoElement().muted&&p=='user_initiated')this._logEvent(k.UNMUTED);},getLogger:function o(){return this._logger;},getAdClientToken:function o(){if(this.getConfig){var p=this.getConfig();if(p.ad_client_token)return p.ad_client_token;}},getSavedOffline:function o(){return null;},logDisplayed:function o(){this._logEvent(k.DISPLAYED,{is_auto_played:true});},logEvent:function o(event,p){this._logEvent(event,p);}};Object.assign(m,h);Object.assign(m,n);f.exports=m;}),null);
__d('MInlineVideoUnit',['HVideoPlayerLoggerMixin','Stratcom','StratcomManager','SubscriptionsHandler','MInlineVideo','MVideoCache','MVideoUtils','VideoPlayerReason','mixin'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r;if(c.__markCompiled)c.__markCompiled();var s=['canplay','play','seeked','seeking'];q=babelHelpers.inherits(t,p(h));r=q&&q.prototype;function t(u,v,w,x){'use strict';r.constructor.call(this);this.$MInlineVideoUnit1=new k();this.$MInlineVideoUnit2=v;this.$MInlineVideoUnit3=u.videoID;this.$MInlineVideoUnit4=u.playerOrigin;this.$MInlineVideoUnit5=u.playerFormat;this.$MInlineVideoUnit6=u.playerSuborigin;this.$MInlineVideoUnit7=x||o.USER;s.forEach(function(event){j.enableDispatch(this.$MInlineVideoUnit2,event);}.bind(this));this.initLogger();i.listen('m:page:unload',null,function(){this.$MInlineVideoUnit1.release();i.removeCurrentListener();}.bind(this));}t.prototype.release=function(){'use strict';this.$MInlineVideoUnit1.release();};t.prototype.getPlayerFormat=function(){'use strict';return this.$MInlineVideoUnit5;};t.prototype.getPlayerOrigin=function(){'use strict';return this.$MInlineVideoUnit4;};t.prototype.getPlayerSuborigin=function(){'use strict';return this.$MInlineVideoUnit6;};t.prototype.getSubscriptions=function(){'use strict';return this.$MInlineVideoUnit1;};t.prototype.getVideoElement=function(){'use strict';return this.$MInlineVideoUnit2;};t.prototype.getVideoID=function(){'use strict';return this.$MInlineVideoUnit3;};t.prototype.getSavedOffline=function(){'use strict';return m.isVideoDownloaded(this.$MInlineVideoUnit3);};t.prototype.getConnectivityType=function(){'use strict';return n.getConnectivityType();};t.prototype.getLastPlayReason=function(){'use strict';return l.getLastActionReason();};t.prototype.getVideoPlayReason=function(){'use strict';return this.$MInlineVideoUnit7;};f.exports=t;}),null);
__d('MCurationOneClickButton',['CSS','DOM','MLegacyDataStore','MRequest','SaveState','SaveStateHandler','Stratcom','MVideoUtils','MVideoCache','emptyFunction','cx','destroyOnUnload'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t='curation-one-click-save-button',u='curation-one-click-unsave-button',v='MCurationOneClickButton_instance',w="_5qgu",x="_5qgv",y="_jhc",z='m-video-download-progress',aa="_5bn2",ba="_4gxh",ca=null;function da(ea,fa,ga,ha,ia,ja,ka,la){'use strict';this.$MCurationOneClickButton1=ea;this.$MCurationOneClickButton2=ga;this.$MCurationOneClickButton3=ha;this.$MCurationOneClickButton4=ia;this.$MCurationOneClickButton5=ja;this.$MCurationOneClickButton6=la&&p.isSupported();this.$MCurationOneClickButton7=false;this.$MCurationOneClickButton8(this.$MCurationOneClickButton1,t);this.$MCurationOneClickButton8(this.$MCurationOneClickButton1,u);da.$MCurationOneClickButton9();m.listen(fa,function(ma){switch(ma){case l.SAVING:h.removeClass(ea,w);h.addClass(ea,x);this.$MCurationOneClickButton10()&&h.addClass(ea,y);this.$MCurationOneClickButton7=true;break;case l.SAVED:h.removeClass(ea,w);h.removeClass(ea,x);this.$MCurationOneClickButton10()&&h.removeClass(ea,y);this.$MCurationOneClickButton7=false;break;case l.UNSAVING:h.addClass(ea,w);h.addClass(ea,x);this.$MCurationOneClickButton7=true;break;case l.UNSAVED:h.addClass(ea,w);h.removeClass(ea,x);this.$MCurationOneClickButton10()&&h.removeClass(ea,y);this.$MCurationOneClickButton7=false;break;}}.bind(this));}da.prototype.$MCurationOneClickButton8=function(ea,fa){'use strict';var ga={};ga[v]=this;var ha=i.find(ea,'*',fa);j.set(ha,ga);};da.prototype.$MCurationOneClickButton10=function(){'use strict';return this.$MCurationOneClickButton6;};da.prototype.$MCurationOneClickButton11=function(ea){'use strict';this.$MCurationOneClickButton12();if(!this.$MCurationOneClickButton7){m.saving(this.$MCurationOneClickButton2);var fa=function(){m.unsaved(this.$MCurationOneClickButton2);}.bind(this),ga=function(ha){this.$MCurationOneClickButton13(this.$MCurationOneClickButton3,ha,fa);}.bind(this);if(ea){ea(ga,fa);}else ga();}};da.prototype.$MCurationOneClickButton14=function(ea){'use strict';this.$MCurationOneClickButton12();if(!this.$MCurationOneClickButton7){this.$MCurationOneClickButton13(this.$MCurationOneClickButton4,ea,function(){m.saved(this.$MCurationOneClickButton2);}.bind(this));m.unsaving(this.$MCurationOneClickButton2);}};da.prototype.$MCurationOneClickButton13=function(ea,fa,ga){'use strict';var ha=new k(ea);ha.listen('error',ga);fa&&ha.listen('done',fa);ha.send();};da.prototype.$MCurationOneClickButton12=function(){'use strict';this.$MCurationOneClickButton5&&this.$MCurationOneClickButton5.disableNux();};da.handleSave=function(ea){'use strict';var fa=ea.getNode(t),ga=j.get(fa)[v],ha=null;if(ga.$MCurationOneClickButton10()){var ia=ea.getNode(o.INSERTION_POINT_SIGIL),ja=i.find(ia,'span',z);if(ja){h.removeClass(ja,ba);h.addClass(ja,aa);}if(ia)ha=function ka(la,ma){var na=j.get(ia);if(na)p.downloadVideo(na.videoID,na.downloadResources,function(){la(function(){var oa=p.getDownloadNotificationUri(ia),pa=new k(oa);pa.send();});},ma,function(oa,pa){if(ja)i.setContent(ja,o.getHumanReadbleSize(oa)+' / '+o.getHumanReadbleSize(pa));});};}ga&&ga.$MCurationOneClickButton11(ha);};da.handleUnsave=function(ea){'use strict';var fa=ea.getNode(u),ga=j.get(fa)[v],ha=q;if(ga.$MCurationOneClickButton10()){var ia=ea.getNode(o.INSERTION_POINT_SIGIL);if(ia){var ja=i.find(ia,'span',z);if(ja){h.removeClass(ja,aa);h.addClass(ja,ba);}ha=function ka(){var la=j.get(ia);if(la)p.deleteVideo(la.videoID,q,q);};}}ga&&ga.$MCurationOneClickButton14(ha);};da.$MCurationOneClickButton9=function(){'use strict';if(ca)return null;ca=[n.listen('click',t,function(ea){da.handleSave(ea);}),n.listen('click',u,function(ea){da.handleUnsave(ea);})];s(function(){while(ca.length)ca.pop().remove();ca=null;});};f.exports=da;}),null);